[["index.html", "Essentials of Vegetation Data Chapter 1 What is Vegetation?", " Essentials of Vegetation Data Greg J. Schmidt 2025-04-10 Chapter 1 What is Vegetation? Vegetation is the spatial manifestation of biological communities on the earth’s surface, usually of primary producers (plants), which in terrestrial settings is stationary and is the majority of total community biomass. Vegetation components are mostly rooted in soil or attached to rock substrate, but epiphytes, plants growing on other plants, can be significant features in humid systems. Aquatic and marine systems may incorporate un-rooted (drifting) primary producers (e.g. floating aquatic plants and pelagic or limnetic algae) or large stationary biological structures created by reef building organisms (coral reefs and oyster beds). Dead biomass in the form of leaf litter, snags (dead standing trees), and logs (down wood) are vegetation byproducts that may inform developmental status and habitat suitability for other organisms. There are two main attributes of vegetation: structure and composition. Structure is the spatial arrangement of the plant community in 3 dimensions. The horizontal arrangement (xy footprint) is expressed as cover, with is percentage of the ground surface occupied by a vertical projection of the outline of each plant. Plant taxa with greater cover can be said to have greater importance than plants with lower cover. The amount of light energy captured as net annual productivity is scaled by canopy cover with varying intensities depending on leaf area index or approximated by foliar cover. The vertical arrangement of plants is expressed as maximum plant height. Together, horizontal outline and height of each plant can be conceptualized as a cylinder, with total biomass scaled to this volume at varying intensities. Taller plants can intercept light before it can reach shorter plants, and are therefore said to be dominant. For trees, biomass is more directly scaled with basal area (cross-sectional area of stems per unit land area) multiplied by height. Stem quadratic mean diameter or dbh (diameter at breast height) of all trees in a stand, scales with stand age, and is important for estimating stand stem density if basal area is known. Height in vegetation inventory is organized into strata. The most basic is the distinction between overstory and understory (see figures 1 and 2). However, the US National Vegetation Classification (FGDC 2008) prescribes a tree stratum (5+ m), shrub stratum (0.5-5 m), and a herb or field stratum (0-0.5 m) for all terrestrial vascular plants, a non-vascular or ground stratum (0 m) for bryophytes and lichens, and a submerged stratum (&lt; 0m) for aquatic plants. Stratum membership is based on the height of perennial buds or annual seeds, therefore a herbaceous plant is always considered to be in the field stratum regardless of the height of the plant, unless it is established as an epiphyte in the canopy of a woody plant. In contrast, woody plants, may occupy multiple strata, representing different age cohorts of the same taxon or species. Figure 1. Overstory includes all vegetation taller than 5 m (16.4 ft), and can be subdivided into subcanopy and canopy strata at 15 m (±5 m) Figure 2. Understory includes all vegetation less than or equal to 5 m (16.4 ft), and is subdivided into a field or herb stratum at less than 0.5 m (1.6 ft) and shrub stratum at 0.5-5 m. Composition is the taxonomic identity and abundance of the plant taxa making up the vegetation. Abundance can be rated as canopy cover, foliar cover, or biomass. According to the USNVC standard (FGDC 2008), canopy cover is the most universal way to rate vegetation, as it is most closely correlated to estimates of cover from remote sensing (aerial photos). Functional attributes of plants such as maximum height, stem persistence, structural support needs, leaf shape, and leaf persistence, are classified as habits or growth forms. A given taxon or species is genetically predisposed to a certain habit under optimal conditions, regardless of its current developmental state. Thus, a tree species is always a “tree” regardless of its present small stature or shrub-like appearance due to young age or poor growth conditions. A tree does not get classified as an “herb” or a “shrub” based on its stratum, but should instead be referred to as tree “seedling” and tree “sapling”, respectively. A shrub is expected to only rarely attain the height of a tree. A liana (woody vine) is able to occupy any height stratum, but only as long as it has physical support as evident by trees or shrubs of matching height. A “herb” (forbs and graminoids) is still a herb, even if some grow nearly as tall as a tree. References "],["protocols.html", "Chapter 2 Protocols Principles: 2.1 Observation Intensity 2.2 General Protocol", " Chapter 2 Protocols Principles: Our goal is to describe the character of the vegetation; we should choose protocols according to how efficiently or accurately they capture basic vegetation attributes. In an ideal world, databases would be constructed around the natural hierarchy among these attributes, whereas data entry forms would be optimized around protocols. A protocol should be employed based on the observations and not be dependent on knowing land use (i.e. aspirations of the landowner) or regulatory status of vegetation. Land use history information, when available, can be used to provide context to the observation. All vegetation shares a basic set of attributes. Some attributes that are life form specific can be recorded whenever those lifeforms are present and should not be omitted on the preconception of how the vegetation might be classified. All vegetation has three classes of attributes: composition; abundance; and structure. Composition is the taxonomic identity or form of the individual plants in the vegetation. Abundance measures the overall amounts of plants in terms of canopy cover, foliar cover, biomass, or frequency. Structure refers to the three-dimensional arrangement of plants, particularly related to distribution of plant height. 2.1 Observation Intensity Observation intensity prioritizes the attributes recorded with respect to the tradeoffs between sample size and time required for the inference being made. 2.1.1 Scouting Nonsystematic observations intended to develop hypotheses or to justify a return trip, not recorded as data. Optional Site Elements Coordinates Optional Vegetation Elements Ocularly estimated community label 2.1.2 Low Intensity Systematic observation with enough detail to diagnose community type, and record as point data, but not enough to fully characterize structure and composition. Low intensity observation include a collection of one or more data elements found in higher intensity observations. It is focused on dominant species (accounting for a cumulative 50% cover), total cover by lifeform, total species inventory by fixed plot area, line point intercept foliar cover transects, et cetera. These separate elements may inform community summaries of these attributes even if by themselves they are incomplete records of vegetation. Essential Site Elements Site ID/Vegetation Plot ID Observer Name Date Coordinates (decimal degrees WGS84) Elevation (m) Slope (%) Aspect Geomorphic Component (e.g. Hillslope position) Landform Earth Cover Kind (Forest, Woodland, Grassland, etc.) Ecological Site ID Plot Area (typically 400 m²) Plot Disturbance Sociability Class Observer Name Essential Vegetation Elements Photo (recommend: 4 direction landscape, canopy wide angle, ground) Total Overstory (&gt;5 m) Canopy Cover Total Vegetation (all vascular strata) Canopy Cover Cover by dominant species by stratum. Minimum regional standard: Most common species accounting for more than 50% of total relative cover Considering at least 2 strata with 5 m threshold. NASIS Tables 1. Site: Site ID, Coordinates, Elevation, Slope, Aspect, Geomorphic Component, Plot Area (to be moved to vegetation plot) User Site ID WGS84 Latitude DD (degrees) WGS84 Longitude DD (degrees) Elevation (m) Slope Gradient (%) Aspect (degrees) State County Area Type ID MLRA Hillslope Profile/Geomorphic Component Hills/Geomorphic Component Flats/Geomorphic Component Terraces/Geomorphic Component Mountains Veg Plot Size (m²) a. Site Observation: Observer Name, Date, Earth Cover Kind, Earth Cover Kind. Data Collector Observation Date Earth Cover Kind One/Earth Cover Kind Two b. Site Geomorphic Description: Landform Geomorphic Feature c. [if available] Site Ecological Site History Ecological Site 2. Vegetation Plot: Assoc [Associate User Pedon ID if site lacks pedon] Total Overstory Canopy Cover Pct (% trees only) Total Canopy Cover Pct (% all plants) Plot Plant Inventory: Cover by dominant species by stratum Plant (USDA Plants Symbol) Plant Type Group Canopy Cover Pct (% –&gt; cover class) Height Class Lower Limit (m –&gt; ft) Height Class Upper Limit (m –&gt; ft) 2.1.3 Medium Intensity Systematic observation with enough detail to characterize complete structure and composition. This is generally resolved as cover in three or more strata. All species are identified where possible. Essential Vegetation Elements Cover by all species by stratum Minimum regional standard: All taxa identified (cover for unknowns accounted for under a genus or functional group, ideally no more than 10% cover is from unknown) Considering at least 3 strata with 0.5 m and 5 m thresholds. Total Basal Area (variable radius plot, trees &gt;= 10 cm in DBH) Basal Area by Species DBH (cm) by species (representative) NASIS Tables 1. Vegetation Plot Basal Area Factor Total BA (m²/ha –&gt; ft²/ac) a. Plot Plant Inventory: Cover by all species by stratum Plant (USDA Plants Symbol) Plant Type Group Plant Nativity Canopy Cover Pct (% –&gt; cover class) (use AK Stratum Cover Class Pct to retain precision) Height Class Lower Limit (m –&gt; ft) Height Class Upper Limit (m –&gt; ft) Basal Area by Spp (m²/ha –&gt; ft²/ac) Overstory DBH Minimum (cm –&gt; inch) Overstory DBH Maximum (cm –&gt; inch) b. Plot Species Basal Area: Plant (USDA Plants Symbol) Plant Type Group Plant Nativity Basal Area Factor Nmbr of Trees In Spp BA (m²/ha –&gt; ft²/ac) 2.1.4 High Intensity Systematic observation with enough detail to characterize complete structure and composition resolved in higher resolution, and with additional data elements. Resolution is generally as cover in three or more strata and live canopy height, with additional data elements such as basal area, diameter, age, biomass, down woody debris, snag density, etc. recorded as needed. All species are identified where possible. Essential Vegetation Elements Maximum height by species, and bottoms for trees (dominant) Total Snags per plot (&gt;=10 cm DBH, &gt; 2 m tall) DBH (cm) by species (all basal area trees) Foliar cover by functional group Ground surface cover by cover type (e.g. down woody debris by size class, tree bases, bryophytes, lichens, leaf litter, bare ground) NASIS Tables 1. Vegetation Plot Hard Tree Snag Density (per ha –&gt; per acre) Soft Tree Snag Density (per ha –&gt; per acre) a. Plot Plant Inventory: Maximum height by species, and bottoms for trees (dominant) Live Canopy Ht Bottom (m –&gt; ft) Live Canopy Ht Top (m –&gt; ft) a1. [optional] Subplot Plant Details [optional] Subplot Number (serial) [optional] Subplot Size (m²) [optional] Number of Stems (count) [optional] Average Stem Diameter (cm –&gt; inch; actual measurement not important if represented as diameter or height class in parent table) b. Plot Species Basal Area: Plant (USDA Plants Symbol) Plant Type Group Plant Nativity Basal Area Factor Nmbr of Trees In Spp BA (m²/ha –&gt; ft²/ac) b1. Basal Area Trees Counted Tree ID Nmbr (serial) Tree Height (m –&gt; ft) DBH (cm –&gt; inch) c. Plot Species Site Index: Plant (USDA Plants Symbol) Site Index Curve (use 999 for unknown) Nmber of Trees Counted (count) c1. Plot Tree Site index Details Tree ID Nmbr (serial) Tree Height (m –&gt; ft) DBH (cm –&gt; inch) Growth Rings (count) Growth Ring Count Height (m –&gt; ft) Tree Age (years) Crown Class d. Vegetation Transect: Veg Transect ID Total Nmbr of Points Sampled (count) Transect Length (m –&gt; ft) [Optional] Nmbr of Dbl Samp Quadrats Clipped (count) [Optional] Total Harvest Annual Prod (kg/ha or g/m² –&gt; lb/acre) d1. Vegetation Transect Plant Summary Plant (USDA Plants Symbol for functional group if not to species) Plant Type Group Plant Nativity Nmbr of Species Foliar Cover Hits (count) Foliar Cover Pct Line Int (%) [Optional] Plant Prod Quadrat Shape [Optional] Plant Prod Quadrat Size (m² –&gt; ft²) [Optional] Total Clipped Wt Fresh (kg/ha or g/m² –&gt; lb/acre) [Optional] Total Clipped Wt Air Dry (kg/ha or g/m² –&gt; lb/acre) d2. Transect Ground Surface Cover Ground Surface Cover Type Nmbr of Points (count) Ground Cover Pct Points (%) 2.2 General Protocol Delineate plot layout. The main plot is called a “macroplot” if subsampled with quadrats and transects. If limited in number of plots, position plot to be representative, avoiding stand boundaries unless heterogeneity is a recurring pattern that cannot be avoided by chosen plot size. While plot size could be adjusted to grain of reoccurring patterns (i.e. species area saturation curve), it is also useful to maintain a consistent scale for the species frequency metric (species richness area relationships). Plots can be square, rectangular, or circular. Although there is a general rule of thumb that the targeted size should asymptotically account for most of the plant species in a stand, most plots tend to be 400 m². In difficult vegetation such as shrub thickets, or when conducting reconnaissance observations, plots can be a small as 100 m². Rich forests may not be adequately sampled at plot sizes under 0.1 ha (1000 m²). Other methods that go beyond a delineated plot (e.g. long transects or zigzag methods) can also be used if the goal is to characterize a whole stand or a community type. In this context the plot would represent just a sample unit of the whole. However, when the plot is paired and analyzed with a pedon record, the emphasis should be on the plot as an integrated unit representing a point on the landscape, and methods that stray from the point location should be avoided. An exception is made for variable radius plots where large trees are often counted outside the macroplot, but are often species that are represented in the understory or have large enough crowns to overlap the plot. Estimate total canopy cover by stratum and lifeform. At minimum, there is an overstory and an understory at 5 m, and non-epiphytic herbaceous plants are tallied as part of the lowest stratum, the “field stratum” at &lt;= 0.5 m (the rationale being that they die back to the lowest stratum each year). A plant must exceed the minimum height of the stratum, but not exceed the maximum height of the stratum. This data will be used to classify structure into basic vegetation type and to calibrate subsequent ocular estimates of plant species abundance. Begin exhaustive species checklist within the boundaries of the plot. If a species is unknown, classify it to nearest, genus, family, or lifeform to ensure that gets accounted for in aggregated analyses. Preferably list species represented in the highest strata first (grouping species sharing strata facilitates data entry), but species discovery is an iterative opportunistic process making absolute control of order impossible. A variable radius plot can be conducted first to establish ordering priority. If there are trees greater than 10 cm in diameter at a height of ~1.37 m (DBH), assess basal area. Measure diameters if needed. Measure the heights of the tallest trees to calibrate subsequent stratum heights. Assess the cover of each species in each stratum. Generally, start from the top stratum down, and remember to note whether the same species occurs in lower strata. Highest cover value cannot exceed the total aggregate cover for the stratum for which it is a member. Cover of species in the tree stratum can be proportioned according to their basal areas, though some species can be disproportionately more prolific in their crowns relative to their basal areas. If stratum height breaks are not specified, data analysis should assume the break points of 0.5 m and 5 m to represent a field, shrub, and tree stratum. However, flexibility in stratum height thresholds is allowable if a representative height is given for each stratum cohort of a taxon. The key is to have enough information on plant heights to integrate plot data with different stratum definitions. An additional tree stratum is recommended for tall forests at greater than 12 or 15 m. It is also common to insert a break at 2 m to separate low and tall shrubs. Increased precision in stratum breaks reduces the need for specifying representative heights within a stratum, though maximum height of each taxon should always be noted. Consider seedling and sapling stem density. If species recruitment is important, define cohort by stem diameter or stratum, count number of individuals by species cohort in subplots. If stand age or site index is important, core representative trees and count rings in addition to DBH and height. If the density and richness of understory vegetation is high and it is difficult to get accurate ocular estimate of cover or if foliar cover is a needed metric, consider line point intercept transects (focused on vegetation &lt; 2 m tall). For dense intermingling plants, the distinction between canopy cover and foliar cover is obscure. Ensure that any additional species found are recorded in the comprehensive macroplot species list. Use foliar cover values to recalibrate ocularly estimated cover if a large discrepancy exists, though transects usually do not capture every species in the macroplot. There needs to be a minimum of 100 points to detect foliar cover values less than 1%. If aboveground biomass or productivity data is needed (e.g. site managed for grazing), consider harvesting and weighing quadrats. Dry weights require that samples be saved and weighed after air drying. Depending on user need and time available and stand richness, weights are resolved to lifeform or species. Samples can also be stratified between direct measurement and estimated units. Figure 1. A square compound plot optimized for prairie, consisting of a 20 by 20 m relevé (400 m² == 0.1 acre), 8, 10 m line-point intercept transects (0.5 m intervals == 160 points) for foliar cover, and 12, 50 by 50 cm biomass quadrats. Figure 2. A circular compound plot optimized for forest, consisting of a 11.3 m radius relevé (400 m² == 0.1 acre), 3, 20 line-point intercept transects (0.5 m intervals == 120 points) for ground surface cover , and 3, 2.06 m radius seedling/sapling density subplots for a 40 m² == 0.01 acre total area. "],["vegetation-databases.html", "Chapter 3 Vegetation Databases 3.1 Potential Data Schema for Vegetation Data 3.2 VegLog MS Access Database 3.3 Vegetation Plot Object in NASIS 3.4 Getting data into EDIT", " Chapter 3 Vegetation Databases 3.1 Potential Data Schema for Vegetation Data The purpose of a vegetation inventory is to characterize a general vegetation concept. For this, a logical vegetation schema is required. Vegetation data can be arranged hierarchically from sampling units dictated by a protocol (individual plant records), demographic summary of plant species cohorts occupying a unit of land (plot composition), and a whole structural summary of the plot, which in turn represent a larger inference area, stand, or vegetation classification concept. Most vegetation types share the same set of measurable properties, but different priorities can be placed on properties depending on land use. A schema should be flexible enough to allow for degrees of uncertainty of the entities being populated. Through a combination of partial and complete records, a higher vegetation concept can be described. At minimum there should be enough data populated for the plot record to be classified to a higher concept. The attributes from each record can also be summarized to characterize that higher concept. Each attribute from individual plant to generalized vegetation concept can be manifest at each level of abstraction. Attributes of individual plant record becomes statistical summaries of those same attributes when considering the whole plot. Not all protocols involve individual plant records, but instead may employ ocular estimates to estimate plot composition directly. Statistics are grouped by the entity name (taxon or habit) and usually partitioned into cohorts based on one or more of the measured properties (size/age classes). There are two different types of plant demographic statistics summarized. The first type is the summary of attributes among individuals in a cohort, and the second type is a summary quantifying the attribute relative to a land area. For example, mean height is meaningful only as a summary per individuals. Mean crown width and quadratic mean diameter may also be meaningful on a per individual basis, but these same properties are manifest as plant abundance in terms of percent canopy cover and basal area (stem area per land area), respectively. At the highest level of abstraction (structure), named entities are dissolved, cohorts may be concatenated into fewer groups, and the summaries are more generalized structural summaries can sometimes be calculated as aggregated attributes from the composition tables, but some attributes can only be estimated independently of the composition data (e.g. total canopy closure, total canopy gap). At the plot level, rather than species name or habit, the named entity reflects a summary of the overall dominant composition (association name) or structure (structural label such as “forest”, “shrubland”, or “grassland”) For the sake of data analysis, all possible statistics that summarize species composition should be available in the same table, even if variations exist in the protocols used to get these statistics. Where different protocols or sampling areas are used to account for these statistics in the same site, it is better practice to establish independent plot records specifying the differences than to maintain redundant tables. Ultimately all the attributes in point data summarize the essential attributes of the modular ecological state concept. A modular ecological state could be moved, split, or merged with other such concepts and its underlying attributes would recalculate. There should be no concern for renumbering or disrupting a nested structure of the state-and-transition model. Any causal relationship posed by the end user between any two modular ecological state box would be inferred dynamically (or at least a filter a list of possible agents of change) from the contrast among their corresponding attributes. 1) Individual Plant Records (stem/point/quadrat) Entity (categorical data) Species Higher Taxon Habit/Growth Form/Plant Type/Functional Group Single Plant Attributes (numeric data) Plant Height Plant Stem Diameter Plant Crown Width Foliar Hit or Plant Total Leaf Area Quadrat Biomass or Plant Total Biomass Plant Age Plant Growth Rate Cohort Membership (categorical data - demographic partition of entity) Cohort Label Cohort Criteria (numeric data - grouping based on an attribute) Height Class Diameter Class Age Class 2) Stand Composition Data Table Entity Species Higher Taxon Habit/Growth Form/Plant Type/Functional Group Attributes (Summarized) Plant Height Statistics Stem Diameter Statistics Crown Width Statistics Age Statistics Cohort Membership Cohort Label Cohort Criteria Height Class Diameter Class Age Class Abundance (attributes per unit area) Frequency Stem Density Stem Basal Area Canopy Cover Foliar Cover Biomass Productivity 3) Total Stand Attributes Table Entity Community Name (association/common name) Community Structure Label Community Dominant Species (short list) Aggregate Attributes (derived from stand composition data) Stand Species Richness Stand Height Statistics Stand Diameter Statistics Stand Total Basal Area Stand Canopy Closure Stand Total Tree Canopy Cover Stand Total Shrub Canopy Cover Stand Total Herb Canopy Cover Stand Total Nonvascular Cover Stand Total Vegetation Canopy Cover (Inverse Canopy Gap) Stand Leaf Area Index (total foliar cover of all strata) Stand Total Stand Biomass (aboveground/belowground) Stand Productivity Stand Age Necromass Attributes (independent of stand composition data) Snag Density (size class/decay class) Down Woody Debris Statistics (size class/decay class) Leaf Litter Cover Plot metadata Protocol Plot size Transect length (number of points) Inventory intensity class (but specifications should speak for themselves) Taxonomic completeness Figure 2. Potential data Schema for vegetation data ) 3.2 VegLog MS Access Database Relevé plot data is collected in a way that optimizes efficiency and quality control in the field, but is not suitable for NASIS (National Soil Information System) in its current form. Field collection datasheet allows cover data for up to 4 strata to be recorded in a single row, ensuring that an observed plant taxon need only be listed once per plot. This avoids the need to recursively scan for the same taxon multiple times to ensure that the occupancy of each stratum is recorded appropriately. However, NASIS records each taxon-stratum incidence as independent rows. Additionally, Relevé protocol (DNR 2013) is based on SI (International System of Units) as are all soil pedon description protocols, but NASIS currently only allows for legacy protocols based on USC (US customary) units to be entered. Prior to entering data into NASIS (National Soil Information System), it is recommended that it first be entered into the custom MS Access Database VegLog. Select user name. Startup Form Site data Observed Sites Enter GSP coordinates in decimal degrees of each plot location. If need be, enter degrees, minutes, seconds at the bottom to auto calculate decimal degrees in current record. Taxon data Site (observed plants tab) Enter species list. Use genus and specific epithet autolookup fields. Enter all the cover values of each of 4 strata. The default heights are 0-0.5, 0.5-5, 5-15, and 15+ meters, but this can be adjusted. Enter basal area of taxon based on variable radius plot as determined by prism or angle gauge. May need to adjust BAF (basal area factor) if not USC BAF base 10. SI BAF 2 is also supported. Enter the maximum and minimum of observed live crown height of dominant (highest) stratum of the taxon in meters. After entering all the data for the plot, use the button to auto populate these heights to their appropriate height within stratum. Live crown heights can also be manually specified for the lower strata in the additional columns, but paper forms may not have the extra columns, and it is relatively redundant information (presence in highest stratum demonstrates capability of taxon to occupy full height range any lower stratum also present). Enter the maximum and minimum diameters (DBH - diameter at breast height) in centimeters of trees observed to fall within the basal area plot (variable radius plot). Other Vegetation details and processing Site (vegetation tab) Enter total cover for each stratum (if zero, leave blank). Synonymize Plant Taxa (assigns PLANTS symbols). Aggregate Cover to show current estimate of aggregate cover, then Transform Overstory and Transform Understory to adjust individual cover values to be more consistent with observed whole stratum cover. Reports (conversions to NASIS) Site (Reports tab) Paste to NASIS to convert to USC units and serialize taxon by stratum data. 3.3 Vegetation Plot Object in NASIS Tips: Row entries save in the local database when you advance to the next record. But if in last new row, the record needs to be saved manually with the end edit green check button at bottom of screen, prior to saving all records (upload) to the national database. After saving to the national database, remember to check in the records to unlock them for future edits. You may rearrange the columns by dragging them to reflect the datasheet that you are copying from. Create new record in Vegetation Plot table. Assign plot record to the appropriate user Site ID and observation date, or create new observation if different from pedon observation date. Name user user vegplot id the same as site id, but may append suffix of P to indicate plot, or T to indicate transect, given that the observation dates can differ and require different observation records. There are two ways to enter the species composition records: 1. By column (faster); by row. Enter species as it appears on your datasheet. You may either enter the full Latin name or enter the PLANTS symbol if you’ve conducted a lookup query in the source database where data was initially entered. If entering by column, proceed with entering each name, vertically before entering the data for other columns, using the down arrow to advance to the next new record. The same species may be entered multiple times. Take care that the sort order of the rows remains consistent with the order on your datasheet to ensure that data entered by column remains correlated properly (not a problem if completing each column of each new row horizontally). You may sort by any of the columns by pressing on the column name; to restore original order of entry, sort by Rec ID on the far right. Select the appropriate growth habit in the Plant Type Group. Every species should have a default value established that is the same regardless of the stature in existing plot record; see regional ecologist if you need a list of accepted values. For by column entry, most entries require only first one or two letters of the growth form, followed by enter, then arrow down. Select the appropriate Plant Nativity, based on whether a taxon is considered native to the state where the inventory was recorded. See BONAP to determine the nativity status. Some species are native to North America, but are considered “adventive” to a state on the BONAP website; select “introduced” in these instances. Select “unknown” for species with both native and introduced genotypes (e.g. Phalaris arundinacea). Enter all the Species Canopy Cover Percent to the nearest whole percent. If rounding down to zero, you need to select the Spp Trace Amount Flag checkbox. Advance to each record using the down arrow. For greater precision to the neared 0.1%, use akstratumcoverclasspct. If you recorded using the cover classes, speciescancovclass is also acceptable. All these cover options will be converted to strictly numeric data when analyzed later. For each species stratum entry, there is a Height Class Lower Limit and Height Class Upper Limit. These are typically based on federal government vegetation standards (FGDC 2008) lower stratum heights converted from meters to feet: 0 to 1.6; 1.6 to 16.4; 16.4 to user define limits for upper strata (e.g. 16.4 to 49.2 and 49.2 to 98.4). To ensure data integrity of original SI units, do not round to the nearest whole number. Enter Live Canopy Ht Bottom and Live Canopy Ht Top the height range of the typical crowns for current taxon within current stratum. The top height is generally going to be within the upper and lower range for the stratum. The canopy bottom can range below the range of the stratum, because the stratum only reflects the top heights of plants in that stratum, while the lowest live branches can extend below that height. Often this is only recorded for the uppermost stratum of the taxon, as it can be safely assumed that the live canopy of lower strata can encompass the whole range of the stratum over time. Enter as feet, but to ensure data integrity if recorded in the field as SI units, do not round to the nearest whole number. Enter Overstory DBH Minimum and Overstory DBH Maximum as inches converted from centimeters. To ensure data integrity of original recorded SI units, do not round to the nearest whole number. Typically, this is only recorded for trees in the uppermost stratum for the taxon. Enter Basal Area by Spp. This is typically based on tree count with a prism, multiplied by a factor. If using a USC factor ten prism, the count is multiplied by ten and entered as is. If using an SI factor two prism, you must convert it to USC; this is less common due to a shortage of SI equipment domestically. To ensure data integrity if originally recorded using SI units, do not round to the nearest whole number. Other remaining columns are optional Vegetation Strata Level only recognizes overstory and understory. If using this column, the overstory strata are those more than 5 m or 16.4 ft. Spp DBH Average is really the quadratic mean diameter if you use a prism to select trees to measure. You can enter each tree diameter individually, but this would need to go into the Plot Tree Inventory table. NASIS Tables Elements colored by observation intensity level: Low Intensity, Medium Intensity, High Intensity, Optional. 1. Site (Plot Area to be moved to vegetation plot) User Site ID WGS84 Latitude DD (degrees) WGS84 Longitude DD (degrees) Elevation (m) Slope Gradient (%) Aspect (degrees) State County Area Type ID MLRA Hillslope Profile/Geomorphic Component Hills/Geomorphic Component Flats/Geomorphic Component Terraces/Geomorphic Component Mountains Veg Plot Size (m²) a. Site Observation Data Collector Observation Date Earth Cover Kind One/Earth Cover Kind Two [if available] Ecological State ID [if available] Ecological State Name [if available] Community Phase ID [if available] Community Phase Name [if available] Plant Association Name (may not have enough characters) b. Site Geomorphic Description Geomorphic Feature c. [if available] Site Ecological Site History Ecological Site 2. Vegetation Plot [if site lacks pedon] Assoc (Associate User Pedon ID)] [optional] Vegetation Plot Name Total Overstory Canopy Cover Pct (% trees only) Total Overstory Canopy Cover Pct (% trees only) Total Canopy Cover Pct (% all plants) Basal Area Factor Total BA (m²/ha –&gt; ft²/ac) Hard Tree Snag Density (per ha –&gt; per acre) Soft Tree Snag Density (per ha –&gt; per acre) a. Plot Plant Inventory: Cover by dominant or all species by stratum Plant (USDA Plants Symbol) Plant Type Group Sociability Class Canopy Cover Pct (% –&gt; cover class) Height Class Lower Limit (m –&gt; ft) Height Class Upper Limit (m –&gt; ft) Basal Area by Spp (m²/ha –&gt; ft²/ac) Overstory DBH Minimum (cm –&gt; inch) Overstory DBH Maximum (cm –&gt; inch) Live Canopy Ht Bottom (m –&gt; ft) Live Canopy Ht Top (m –&gt; ft) a1. [optional] Subplot Plant Details [optional] Subplot Number (serial) [optional] Subplot Size (m²) [optional] Number of Stems (count) [optional] Average Stem Diameter (cm –&gt; inch; actual measurement not important if represented as diameter or height class in parent table) b. Plot Species Basal Area Plant (USDA Plants Symbol) Plant Type Group Plant Nativity Basal Area Factor Nmbr of Trees In Spp BA (m²/ha –&gt; ft²/ac) b1. Basal Area Trees Counted Tree ID Nmbr (serial) Tree Height (m –&gt; ft) DBH (cm –&gt; inch) c. Plot Species Site Index Plant (USDA Plants Symbol) Site Index Curve (use 999 for unknown) Nmber of Trees Counted (count) c1. Plot Tree Site index Details Tree ID Nmbr (serial) Tree Height (m –&gt; ft) DBH (cm –&gt; inch) Growth Rings (count) Growth Ring Count Height (m –&gt; ft) Tree Age (years) Crown Class d. Vegetation Transect Veg Transect ID Total Nmbr of Points Sampled (count) Transect Length (m –&gt; ft) [Optional] Nmbr of Dbl Samp Quadrats Clipped (count) [Optional] Total Harvest Annual Prod (kg/ha or g/m² –&gt; lb/acre) d1. Vegetation Transect Plant Summary Plant (USDA Plants Symbol for functional group if not to species) Plant Type Group Plant Nativity Nmbr of Species Foliar Cover Hits (count) Foliar Cover Pct Line Int (%) [Optional] Plant Prod Quadrat Shape [Optional] Plant Prod Quadrat Size (m² –&gt; ft²) [Optional] Total Clipped Wt Fresh (kg/ha or g/m² –&gt; lb/acre) [Optional] Total Clipped Wt Air Dry (kg/ha or g/m² –&gt; lb/acre) d2. Transect Ground Surface Cover Ground Surface Cover Type Nmbr of Points (count) Ground Cover Pct Points (%) e. Plot Disturbance Disturbance Type Frequency Disturbance Impact 3.3.1 NASIS Data Entry Establish Site record directly in site table the User Site ID and GPS coordinates. Establish date within Site Observation child table. Establish VegPlot record directly in Vegetation Plot table, entering User Plot ID and select the appropriate Site Observation (seen as User Site ID and Date). Enter any other values that might be common among the plots. Vegetation Plot table Open Plot Plant Inventory child table and establish the species list. Rather than scrolling to find all the required columns, proceed to one of the following forms. Vegetation Plot &gt; Plot Plant Inventory child table Open ESI Site-Releve form and populate the site and plot meta data. This form requires that both Site and Vegetation Plot records be checked out and editable. If the Site table is already populated, there is no need to check out the record. ESI Site-Releve form Instead, use one of the simpler forms that only accesses data from Vegetation Plot. Use ESI Releve for simple species cover by stratum. ESI Releve-Simple form Use ESI Releve Structure to fill out plot details other than species composition. ESI Releve-Structure form Use ESI Releve-Trees-All to enter basal area tree diameters and site index. ESI Releve-Trees-All form Use ESI Releve-Transect ESI Releve-Transect form Optionally, create a record for Site Association and name it the same as the relevant NASIS Project. Populate the Site child table with all the sites observed for the project. If this is an Ecological Site Verification project, you may opt to include sites observed for previous projects if they have plot data relevant for integration with the current project. Site Association Table 3.3.2 NASIS Data Extraction Query for Ecological Site Verification Projects in your Region and load them into your local database. Project by Project Substype, Office, and User Project ID query Get list of project user ids in R by running this script. library(soilDB) projects &lt;- soilDB::get_projectmapunit_from_NASIS(SS=F) projects &lt;- subset(projects, select=c(projectiid, uprojectid, projectname)) |&gt; unique() paste(projects$uprojectid, collapse = &quot; &quot;) Just copy the set of project IDs in the RStudio console without the quotes. Run this query in 3-4 stages to get data from all related tables. Query for sites and site associations using SiteObs by list of Site Associations, run nationally. SiteObs by list of Site Associations query Get the vegplots, run nationally. SiteObs by list of Site Associations query Get the pedons if needed, run nationally. SiteObs by list of Site Associations query Run local query for all objects. SiteObs by list of Site Associations query #Site data siteass &lt;- get_site_association_from_NASIS(SS=F) sites &lt;- get_site_data_from_NASIS_db(SS=F) #Vegetation data veg.raw &lt;- soilDB::get_vegplot_species_from_NASIS_db(SS=F) vegplot &lt;- soilDB::get_vegplot_from_NASIS_db(SS=F) Data are now available in R environment for quality control and analysis. 3.4 Getting data into EDIT #remotes::install_github(&quot;ncss-tech/soilDB&quot;, dependencies = FALSE) library(soilDB) #1. Run queries in NASIS for projects ---- projects &lt;- get_projectmilestone_from_NASIS(SS=F) projects &lt;- subset(projects, select=c(uprojectid, projectname)) |&gt; unique() paste(projects$uprojectid, collapse = &quot; &quot;) #2. Run queries in NASIS for Site Association ---- siteass &lt;- get_site_association_from_NASIS(SS=F) sites &lt;- get_site_data_from_NASIS_db(SS=F) #3. Run queries in NASIS to capture all vegplots related to site associations ---- library(dplyr) library(vegnasis) veg.raw &lt;- soilDB::get_vegplot_species_from_NASIS_db(SS=F) vegplot &lt;- soilDB::get_vegplot_from_NASIS_db(SS=F) #4. Combine STM attributes ---- vegsite &lt;- subset(sites, select = c(siteiid, site_id, siteobsiid, ecositeid,ecositenm,ecostatename,commphasename)) |&gt; left_join(subset(vegplot, select = c(siteobsiid, vegplotid, obsintensity)), relationship = &quot;many-to-many&quot;) |&gt; unique() #5. Analyse plot structure and composition ---- veg &lt;- vegnasis::clean.veg(veg.raw) veg$taxon &lt;- harmonize.taxa(veg$taxon, fix = TRUE, sensu = &quot;usda&quot;) veg &lt;- veg |&gt; fill.type.df() |&gt; fill.hts.df() veg.structure &lt;- get.structure(veg) veg.ass &lt;- get.assoc(veg) veg.over &lt;- veg |&gt; subset(ht.max &gt; 5) |&gt; group_by(plot, taxon, type) |&gt; summarise(cover=cover.agg(cover)) veg.under &lt;- veg |&gt; subset(ht.max &lt;= 5) |&gt; group_by(plot, taxon, type) |&gt; summarise(cover=cover.agg(cover)) #5. Summary Plant Composition Table for export as spreadsheet for pasting into EDIT ---- Veg.group &lt;- veg |&gt; left_join(vegsite, by=join_by(plot==vegplotid),relationship = &quot;many-to-many&quot;) |&gt; subset(!is.na(plot)) |&gt; #Create a group mutate(group = paste(ecositeid, ecositenm, ecostatename, commphasename)) EDITsum &lt;- vegnasis::summary.ESIS(Veg.group, group = &#39;group&#39;,normalize = TRUE, lowerQ = 0, upperQ = 1, breaks = c(0.5,5,12), forEDIT = TRUE) |&gt; #Round up for high cover mutate(cover.High=ifelse(cover.High &lt; 0.1,0.1,cover.High)) |&gt; #Override plant type mutate(type = case_when(symbol %in% &#39;COCAC3&#39; ~ &#39;Forb/Herb&#39;, symbol %in% &#39;CASP14&#39; ~ &#39;Forb/Herb&#39;, symbol %in% &#39;PRSU3&#39; ~ &#39;Shrub/Subshrub&#39;, symbol %in% &#39;2LICHN&#39; ~ &#39;Biological Crusts&#39;, symbol %in% &#39;Orchidaceae&#39; ~ &#39;Forb/Herb&#39;, TRUE ~ type), #Set sort order based on type type.top = case_when(type %in% &#39;Tree&#39; ~ 1, type %in% &#39;Shrub/Subshrub&#39; ~ 2, type %in% &#39;Vine/Liana&#39; ~ 3, type %in% &#39;Grass/grass-like (Graminoids)&#39; ~ 4, type %in% &#39;Forb/Herb&#39; ~ 5, type %in% &#39;Fern/fern ally&#39; ~ 6, type %in% &#39;Nonvascular&#39; ~ 7, type %in% &#39;Biological Crusts&#39; ~ 8, TRUE ~ 9)) |&gt; arrange(group,overstory,type.top, desc(taxon.cover), taxon) #Unit conversion is optional because EDIT allows either SI or USC data entry. EDITsum.USC &lt;- EDITsum |&gt; mutate(Bottom = ht.USC(Bottom), Top = ht.USC(Top), dbh.Low=dbh.USC(dbh.Low), dbh.High=dbh.USC(dbh.High), BA.Low=BA.to.USC(BA.Low), BA.High=BA.to.USC(BA.High)) write.csv(EDITsum, &#39;EDITsum.csv&#39;, row.names = FALSE, na = &quot;&quot;) #6. EDIT Stand Structure ---- veg.str &lt;- summary.crown.thickness(veg, breaks = c(0.15,0.3,0.6,1.4,4,12,24,37)) |&gt; structure.fill.zero() |&gt; subset(type %in% c(&#39;tree&#39;, &#39;shrub/vine&#39;, &#39;grass/grasslike&#39;, &#39;forb&#39;)) veg.str &lt;- veg.str |&gt; left_join(vegsite, by=join_by(plot==vegplotid),relationship = &quot;many-to-many&quot;) |&gt; subset(!is.na(plot)) |&gt; #Create a group mutate(group = paste(ecositeid, ecositenm, ecostatename, commphasename)) veg.str.pct &lt;- veg.str |&gt; group_by(group, type, stratum, stratum.label, bottom, top) |&gt; summarise(X25 = quantile(Cover, 0.25), X50 = quantile(Cover, 0.5), X75 = quantile(Cover, 0.75)) write.csv(veg.str.pct, &#39;veg.str.pct.csv&#39;, row.names = FALSE, na = &quot;&quot;) Find your comma delimited spreadsheet, ‘EDITsum.csv’, open and then copy and paste the relevant portions into EDIT. Be cognizant of whether EDIT is set on SI (metric) units or USC (US Customary or English) units. Vegnasis package analyses data in SI units, but you can optionally convert all data to USC prior to exporting it as a spreadsheet. Or you can set EDIT to accept SI units. Copy from Spreadsheet just the portion related to this community, either overstory or understory. Paste into EDIT into the correct Forest Overstory or Understory Species composition table References "],["vegetation-analysis.html", "Chapter 4 Vegetation Analysis 4.1 Plot Data Schema 4.2 Missing Data 4.3 Aggregating Cover", " Chapter 4 Vegetation Analysis 4.1 Plot Data Schema Several vegnasis functions require data frames with a predefined standard set of column names to operate. The pre.fill.veg() was designed to allow the user to process any data frame by filter out extraneous data columns and append any missing columns. Prior to using this function, steps are initially taken to manually assign existing data to a standardized column names as much as possible. User has a responsibility to convert any legacy units of measure to SI (metric system) for subsequent analyses to be scaled properly. Conversions to USC units, if desired, should take place only as a final step after analysis. The clean.veg() function can read the column names as they exist in NASIS and make the appropriate assignments and unit conversions. plot = Unique identifer for plot. label = Convenient contextual name for plot. symbol = USDA PLANTS symbol. taxon = Species (binomial), and sometimes genus, subspecies, or varieties. type = Growth habit or form such as ‘tree’, ‘shrub/vine’, ‘grass/grasslike’, ‘forb’, ‘moss’, etc. nativity = ‘native’ or ‘introduced’ status within the geographic area or the plot. cover = crown or canopy cover (not the same as foliar cover). stratum.min = minimum height range (m) of stratum considered to be occupied by this taxon. stratum.max = maximum height range (m) of stratum considered to be occupied by this taxon. crown.min = bottom height (m) of live canopy for members of this taxon occupying this stratum. crown.max = top height (m) of live canopy for members of this taxon occupying this stratum. dbh.min = minimum diameter (cm) of trees measured (usually at “breast height”, 1.37 or 1.4 m above the grown, a.k.a. ‘DBH’). dbh.max = maximum diameter (cm) of trees measured (usually at “breast height”, 1.37 or 1.4 m above the grown, a.k.a. ‘DBH’). Mean diameter (cm) of all trees measured using a variable radius plot (BA prism) is the same as quadratic mean diameter of all trees within a fixed plot. BA = basal area (square meters per hectare). In lieu of the complete set of diameters, the maximum and minimum diameter can be used to estimate the quadratic mean diameter, which is used to determine stand density with basal area. library(vegnasis) obsite &lt;- c(&#39;plot1&#39;,&#39;plot1&#39;,&#39;plot1&#39;, &#39;plot2&#39;, &#39;plot2&#39;) obsspp &lt;- c(&#39;Acer rubrum&#39;,&#39;Pinus strobus&#39;,&#39;Pteridium aquilinum&#39;, &#39;Lindera benzoin&#39;, &#39;Trillium grandiflorum&#39;) abund &lt;- c(80,10,30,10,10) mydata &lt;- data.frame(obsite=obsite, obsspp=obsspp, abund=abund) #Identify columns containing data corresponding to standard column names. mydata &lt;- mydata |&gt; mutate(taxon=obsspp, cover=abund, plot=obsite) veg &lt;- mydata |&gt; pre.fill.veg() knitr::kable( head(veg, 10), booktabs = TRUE, caption = &#39;A table of rudimentary veg data.&#39; ) Table 4.1: A table of rudimentary veg data. plot label date lat lon symbol taxon type habit nativity cover stratum.min stratum.max crown.min crown.max dbh.min dbh.max BA crshape crfill crcolor stshape stfill stcolor plot1 NA NA NA NA NA Acer rubrum NA NA NA 80 NA NA NA NA NA NA NA NA NA NA NA NA NA plot1 NA NA NA NA NA Pinus strobus NA NA NA 10 NA NA NA NA NA NA NA NA NA NA NA NA NA plot1 NA NA NA NA NA Pteridium aquilinum NA NA NA 30 NA NA NA NA NA NA NA NA NA NA NA NA NA plot2 NA NA NA NA NA Lindera benzoin NA NA NA 10 NA NA NA NA NA NA NA NA NA NA NA NA NA plot2 NA NA NA NA NA Trillium grandiflorum NA NA NA 10 NA NA NA NA NA NA NA NA NA NA NA NA NA 4.2 Missing Data Several function in vegnasis were created to fill in missing data in either a NASIS import, or a user constructed data set. In many cases, there is a data frame and a vector version of the same function, depending on whether there is “.df” suffix. fill.hts.df() Function consolidates recorded plant height data and fills in missing values based on taxon or growth habit depending on what type of height data is missing. This function requires a data frame with standardized column names. fill.nativity.df() This function fills in missing nativity data based taxon status across broad regions of North America. Taxon may still be introduced (or adventive) within a state in that region, but native considering the area collectively. If a region is not specified, the default is the nativity across the United States. This version of the function take a vegetation plot data frame (cleaned by the clean.veg function) as input. fill.taxon.from.symbols() This function fills in missing plant names from USDA symbols if they exist. fill.type.df() Lookup the NASIS life form “type” according to default growth habit of each taxon. Include column of existing types if existing types are to be preserved while filling in only missing values. Output is a vector that can be used to populate the plant “type”” column. fill.usda.symbols() This function fills in missing USDA PLANTS symbols, assuming that the concept behind the names being used are not misapplied homonyms (auct non). If existing symbols are provided (optional), priority is given to existing symbols, while only missing data is replaced. # remotes::install_github(&quot;phytoclast/vegnasis&quot;, dependencies = FALSE) veg &lt;- veg |&gt; fill.type.df() |&gt; fill.hts.df() |&gt; fill.nativity.df() |&gt; mutate(symbol = fill.usda.symbols(taxon)) knitr::kable( head(veg, 10), booktabs = TRUE, caption = &#39;A table of rudimentary veg data.&#39; ) Table 4.2: A table of rudimentary veg data. plot label date lat lon symbol taxon type habit nativity cover stratum.min stratum.max crown.min crown.max dbh.min dbh.max BA crshape crfill crcolor stshape stfill stcolor ht.min ht.max taxon.max stand.max plot1 NA NA NA NA ACRU Acer rubrum tree NA native 80 NA NA NA NA NA NA NA NA NA NA NA NA NA 0 0 30.0 0 plot1 NA NA NA NA PIST Pinus strobus tree NA native 10 NA NA NA NA NA NA NA NA NA NA NA NA NA 0 0 60.0 0 plot1 NA NA NA NA PTAQ Pteridium aquilinum forb NA native 30 NA NA NA NA NA NA NA NA NA NA NA NA NA 0 0 2.0 0 plot2 NA NA NA NA LIBE3 Lindera benzoin shrub/vine NA native 10 NA NA NA NA NA NA NA NA NA NA NA NA NA 0 0 4.0 0 plot2 NA NA NA NA TRGR4 Trillium grandiflorum forb NA native 10 NA NA NA NA NA NA NA NA NA NA NA NA NA 0 0 0.2 0 4.3 Aggregating Cover Appendix K in the USNVC (FGDC (2008)) presents a formula intended to combine cover values of multiple strata without exceeding 100%. \\[C_i = (1 - \\prod_{j=1}^n(1-\\frac{cover_j}{100}))*100\\] This is useful for many operations when combining strata or aggregating structure within a stratum. When assessing total canopy cover for a stand, individual cover values may sum greater than 100%, yet an independent assessment of cover doesn’t exceed 100%. Conversely, amount of open sky (not filtered by a crown outline) cannot be negative. More simply stated as a formula that can be plugged into RStudio: cover = c(10, 20) 100*(1-10^(sum(log10(1-(cover/100))))) ## [1] 28 cover = c(5, 10, 20, 30, 40) 100*(1-10^(sum(log10(1-(cover/100))))) ## [1] 71.272 Whereas a simple sum is similar to the formula when adding two small values and exceeds 100% with adding more or higher values: cover = c(10, 20) sum(cover) ## [1] 30 cover = c(5, 10, 20, 30, 40) sum(cover) ## [1] 105 The formula allows for random crown overlap, which is minimal at low density, but increases with density as total aggregated cover approaches 100%. As such, the function vegnasis::cover.agg() is used within many different functions that combine species or stratum cover. But in reality, crowns in the same stratum avoid each other, and cover in the understory tends to correlate with gaps (avoiding shade). The effect of crown overlap versus competition is illustrated when considering a stand of trees and treating each tree as an independent species. For and area of 16 ha (400 by 400 m), 1500 trees with crown diameters of 10 m have a potential to cover 73.6% of the area. If planted at random and allowed to overlap, about 52.1% of the area is predicted by the formula, close to a simulated value of 52.0%. Figure 1. 1500 Random trees with crowns 10 m in diameter are predicted to cover 52.1% of the area. However, if an equidistant hexagonal grid is established which gives priority to planting trees further apart, the total cover does not aggree with the formula. Figure 1. Weighted Hexagonal Grid Trees semi-randomly planted at 1500 per 16 ha (and crowns of 10 m in diameter), simulating crown competition, cover 66.2% of the area, intermediate between the formula’s predicted 52.1% and the maximum potential area of 73.6%. Figure 1. 1500 Non-random trees with crowns 10 m in diameter cover 66.2% of the area. For most natural settings, when the only a few cover values are to be aggregated and for which there is a big difference in cover, the default formula by vegnasis::cover.agg() is adequate. But other applications where the need is to predict the total cover of multiple individuals competing in the same stratum, an alternative formulation by vegnasis::cover.agg.stratum() is given which averages the expected sum (maximum capped at 100%) and the default formula. References "],["composition.html", "Chapter 5 Composition 5.1 Data Processing Harmonizing Taxa 5.2 Associations 5.3 Cluster Analysis 5.4 Phylogenetically Weighted Cluster Analysis", " Chapter 5 Composition This analysis using vegnasis package explores vegetation composition. 5.1 Data Processing # remotes::install_github(&quot;phytoclast/vegnasis&quot;, dependencies = FALSE) library(vegnasis) library(ggplot2) veg.raw &lt;- vegnasis::nasis.veg # With a connection to NASIS via soilDB... # veg.raw &lt;- soilDB::get_vegplot_species_from_NASIS_db() #Clean data veg &lt;- clean.veg(veg.raw) #Select only Wexford County Michigan records, and exclude imprecise non bionomial (genus or family) records by requiring a blank space in the name. veg &lt;- veg |&gt; subset(grepl(&#39;MI165&#39;,plot) &amp; grepl(&#39;[[:blank:]]&#39;,taxon)) #These tasks fill in missing plant &#39;types&#39; and establishes the crown heights based on user inputs of stratum, live canopy heights, and taxon norms when user data is missing. veg &lt;- veg |&gt; fill.type.df() |&gt; fill.hts.df() options(knitr.kable.NA = &#39;-&#39;) knitr::kable( head(veg, 10), row.names = FALSE, booktabs = TRUE, caption = &#39;A table of the first 10 rows of the veg data.&#39; ) |&gt; kableExtra::column_spec(5,italic=T) |&gt; kableExtra::scroll_box(width = &quot;100%&quot;)|&gt; kableExtra::kable_classic(full_width = F, html_font = &quot;Cambria&quot;, position = &quot;left&quot;) Table 5.1: Table 5.2: A table of the first 10 rows of the veg data. plot label date symbol taxon type nativity cover stratum.min stratum.max crown.min crown.max dbh.min dbh.max BA ht.min ht.max taxon.max stand.max 2022MI165020.P 2022-08-12 VAAN Vaccinium angustifolium shrub/vine native 7.0 0.0 0.5 0.3 0.1 0.3 0.5 30 2022MI165020.P 2022-08-12 QURU Quercus rubra tree native 5.0 15.0 30.0 5 20.0 5.0 20.0 35.0 30 2022MI165020.P 2022-08-12 QUAL Quercus alba tree native 0.2 0.5 5.0 0.8 0.4 0.8 35.0 30 2022MI165020.P 2022-08-12 QUAL Quercus alba tree native 1.0 0.0 0.5 0.2 0.5 35.0 30 2022MI165020.P 2022-08-12 PTAQ Pteridium aquilinum forb native 75.0 0.0 0.5 1.0 0.5 1.0 2.0 30 2022MI165020.P 2022-08-12 PRSE2 Prunus serotina tree native 1.0 5.0 15.0 6.0 3.0 6.0 35.0 30 2022MI165020.P 2022-08-12 PRSE2 Prunus serotina tree native 0.2 0.0 0.5 0.2 0.5 35.0 30 2022MI165020.P 2022-08-12 PLSC70 Pleurozium schreberi moss native 90.0 0.0 0.5 0.0 0.0 0.0 0.0 30 2022MI165020.P 2022-08-12 PIBA2 Pinus banksiana tree native 56.0 15.0 30.0 8 17.0 16 22 23 8.0 17.0 25.0 30 2022MI165020.P 2022-08-12 PIBA2 Pinus banksiana tree native 9.0 5.0 15.0 7.5 15.0 25.0 30 Harmonizing Taxa When combining data from multiple sources, the possibility exists that the ecologist used a different scientific name for a taxon. Before conducting cluster analysis, it is wise to harmonize the taxonomy. harmonize.taxa() This function synonymizes taxa with BONAP or for Mexican only plants, Kew’s Plants of the World Online circa 2022, and returns a binomial. Assuming that the ecologist has the correct concept for the plant while in the field, and is using a legitimate name for that concept, the name can be synonymized. This ensures that various vegetation summarizing functions work off a shared taxonomic backbone, and not misconstrue synonyms as plant diversity. 5.2 Associations #This function ranks each taxon by cover and retains the top 2-5 taxa, with fewer taxa retained with greater unequal dominance. Taxa are separated by &#39;/&#39; when different stratum, and &#39;-&#39; when in the same stratum. veg.associations &lt;- veg |&gt; get.assoc() knitr::kable( veg.associations, booktabs = TRUE, caption = &#39;A table with the top 2-5 taxa organized by stratum of each plot.&#39; ) |&gt; kableExtra::kable_styling(full_width = F) Table 5.3: Table 5.4: A table with the top 2-5 taxa organized by stratum of each plot. plot association 2022MI165001.P Populus grandidentata/Pteridium aquilinum 2022MI165002.P Acer rubrum/Fagus grandifolia 2022MI165003.P Acer rubrum/Fagus grandifolia 2022MI165004.P Quercus rubra/Fagus grandifolia/Pteridium aquilinum 2022MI165005.P Populus tremuloides/Carex bromoides-Athyrium angustum 2022MI165006.P Acer saccharum/Fagus grandifolia/Erythronium americanum 2022MI165007.P Quercus rubra-Tsuga canadensis/Acer rubrum/Ostrya virginiana 2022MI165008.P Fagus grandifolia-Acer saccharum/Erythronium americanum 2022MI165009.P Acer saccharum/Allium tricoccum 2022MI165010.P Pinus resinosa/Deschampsia flexuosa-Vaccinium angustifolium/Dicranum polysetum-Pleurozium schreberi 2022MI165011.P Quercus velutina/Carex pensylvanica 2022MI165012.P Quercus alba/Pinus strobus/Carex pensylvanica-Pteridium aquilinum-Gaultheria procumbens 2022MI165013.P Quercus alba/Pteridium aquilinum 2022MI165014.P Pinus resinosa/Vaccinium angustifolium-Pteridium aquilinum 2022MI165015.P Pinus strobus/Solidago gigantea-Maianthemum stellatum 2022MI165016.P Pinus resinosa/Quercus alba/Vaccinium angustifolium-Pteridium aquilinum 2022MI165017.P Pinus resinosa-Pinus strobus/Carex pensylvanica-Pteridium aquilinum 2022MI165018.P Acer rubrum-Quercus alba/Hamamelis virginiana-Prunus serotina/Pteridium aquilinum 2022MI165019.P Acer rubrum-Quercus rubra/Fagus grandifolia/Amelanchier arborea/Pteridium aquilinum-Carex pensylvanica-Maianthemum canadense 2022MI165020.P Pinus banksiana/Pteridium aquilinum-Carex pensylvanica/Pleurozium schreberi 2022MI165021.P Pinus resinosa/Pteridium aquilinum 2022MI165022.P Pinus resinosa/Pteridium aquilinum 2022MI165023.P Pinus strobus-Acer rubrum-Tsuga canadensis/Dryopteris carthusiana-Glyceria striata-Solidago gigantea-Coptis trifolia 2022MI165024.P Acer rubrum-Quercus rubra/Pinus strobus/Carex pensylvanica 2022MI165025.P Pinus strobus/Fagus grandifolia/Deschampsia flexuosa-Carex pensylvanica 2022MI165026.P Acer rubrum/Prunus serotina/Carpinus caroliniana-Quercus alba/Carex stricta 2022MI165027.P Acer rubrum/Fagus grandifolia 2022MI165028.P Acer saccharum-Tilia americana 2022MI165029.P Acer saccharum/Ostrya virginiana 2022MI165030.P Acer rubrum/Pteridium aquilinum 2022MI165031.P Acer rubrum/Thuja occidentalis/Alnus incana/Vaccinium myrtilloides 2022MI165032.P Acer rubrum-Tsuga canadensis 2022MI165033.P Tilia americana/Acer saccharinum/Carpinus caroliniana/Carex stricta 2022MI165034.P Acer saccharum/Carpinus caroliniana 5.3 Cluster Analysis #Create plot matrix, based log transformed relative cover values. m &lt;- veg |&gt; make.plot.matrix(tr = &#39;log&#39;, rc = TRUE) knitr::kable( m[1:10,1:10], booktabs = TRUE, caption = &#39;A table of the first 10 rows of the community data matrix.&#39; ) Table 5.5: A table of the first 10 rows of the community data matrix. Abies.balsamea Acer.rubrum Acer.saccharinum Acer.saccharum Achillea.millefolium Adiantum.pedatum Agrimonia.gryposepala Allium.tricoccum Alnus.incana Alnus.rugosa 2022MI165001.P 0.0098231 0.2735230 0 0.0000000 0 0 0 0.0000000 0 0 2022MI165002.P 0.0000000 0.7695928 0 0.0000000 0 0 0 0.0000000 0 0 2022MI165003.P 0.0246233 0.5401819 0 0.0000000 0 0 0 0.0000000 0 0 2022MI165004.P 0.0000000 0.0015488 0 0.0015488 0 0 0 0.0000000 0 0 2022MI165005.P 0.0000000 0.0353465 0 0.0000000 0 0 0 0.0000000 0 0 2022MI165006.P 0.0000000 0.0000000 0 0.5647917 0 0 0 0.0000000 0 0 2022MI165007.P 0.0000000 0.1868105 0 0.0501600 0 0 0 0.0000000 0 0 2022MI165008.P 0.0000000 0.0016694 0 0.2704181 0 0 0 0.0000000 0 0 2022MI165009.P 0.0000000 0.0016849 0 0.7854276 0 0 0 0.2505727 0 0 2022MI165010.P 0.0000000 0.0050284 0 0.0000000 0 0 0 0.0000000 0 0 #distance matrix based on Bray-Curtis simularity. d = vegan::vegdist(m, method=&#39;bray&#39;) #Cluster analysis using Ward&#39;s method using distance matrix. t &lt;- cluster::agnes(d, method = &#39;ward&#39;)|&gt; as.hclust() #Define number of groups to color the dendrogram by. k = 3 groups &lt;- cutree(t, k = k) #This function rearranges the branchs and groups so that the tree is always oriented with most nested branches to the bottom of the plot (when tree oriented vertically with branches to the right). groups &lt;- dendrogrouporder(t, groups) a = &#39;Vegetation of Wexford County&#39; plot.dendro(a,d,t,groups) Figure 5.1: Dendrogram of selected plots 5.4 Phylogenetically Weighted Cluster Analysis Sometimes there are several unknown species in a plot, which may or may not be the same as a species in other plots. These unknown species are often recorded as genera (e.g. Rubus), or if more ambiguous, as family (e.g. Poaceae). Creating a similarity matrix which rates commonly held genera and families may provide some partial credit to link plots related by unknown species. Alternatively, when comparing vegetation from more geographically distant biotic realms with few overlapping species, there may yet be value in giving credit to shared genera and families in as much as some ecological traits are phylogenetically conserved. #Create alternative higher taxon datasets and combine them. veg.genera &lt;- veg |&gt; mutate(taxon = link.taxonomy(taxon, taxrank=1)) veg.families &lt;- veg |&gt; mutate(taxon = link.taxonomy(taxon, taxrank=2)) veg.combined &lt;- rbind(veg,veg.genera,veg.families) #Create plot matrix, based log transformed relative cover values. m &lt;- veg.combined |&gt; make.plot.matrix(tr = &#39;log&#39;, rc = TRUE) #distance matrix based on Bray-Curtis simularity. d = vegan::vegdist(m, method=&#39;bray&#39;) #Cluster analysis using Ward&#39;s method using distance matrix. t &lt;- cluster::agnes(d, method = &#39;ward&#39;)|&gt; as.hclust() #Define number of groups to color the dendrogram by. k = 3 groups &lt;- cutree(t, k = k) #This function rearranges the branchs and groups so that the tree is always oriented with most nested branches to the bottom of the plot (when tree oriented vertically with branches to the right). groups &lt;- dendrogrouporder(t, groups) a = &#39;Vegetation of Wexford County&#39; plot.dendro(a,d,t,groups) Figure 5.2: Phylogenetically Weighted Dendrogram of selected plots "],["structure.html", "Chapter 6 Structure 6.1 Data Processing 6.2 Structure Summary 6.3 Structure Profile 6.4 Functional Vegetation Attributes 6.5 Ternary Plot of Structure", " Chapter 6 Structure This analysis using vegnasis package explores vegetation structure. 6.1 Data Processing # remotes::install_github(&quot;phytoclast/vegnasis&quot;, dependencies = FALSE) library(vegnasis) library(ggplot2) veg.raw &lt;- vegnasis::nasis.veg # With a connection to NASIS via soilDB... # veg.raw &lt;- soilDB::get_vegplot_species_from_NASIS_db() veg &lt;- clean.veg(veg.raw) #These tasks fill in missing plant &#39;types&#39; and establishes the crown heights based on user inputs of stratum, live canopy heights, and taxon norms when user data is missing. veg &lt;- veg |&gt; fill.type.df() |&gt; fill.hts.df() #Select only Wexford County Michigan records. veg &lt;- veg |&gt; subset(grepl(&#39;MI165&#39;,plot)) 6.2 Structure Summary veg.structure &lt;- veg |&gt; get.structure() knitr::kable( veg.structure, booktabs = TRUE, caption = &#39;A table with estimating structure of each plot.&#39; ) Table 6.1: A table with estimating structure of each plot. plot tree shrub herb moss ht.max structure 2022MI165001.P 95.3 17.8 15.4 0.0 20 forest 2022MI165002.P 95.1 4.5 8.7 0.0 20 forest 2022MI165003.P 90.1 15.0 16.6 5.9 20 forest 2022MI165004.P 95.0 77.2 13.2 0.0 21 forest 2022MI165005.P 29.6 7.3 94.4 0.0 31 woodland 2022MI165006.P 80.0 99.1 11.0 0.0 26 forest 2022MI165007.P 95.2 27.6 2.2 0.0 31 forest 2022MI165008.P 95.0 77.5 10.7 0.0 29 forest 2022MI165009.P 95.0 26.1 52.8 0.0 31 forest 2022MI165010.P 70.3 54.4 68.3 64.0 25 forest 2022MI165011.P 79.5 26.2 87.0 5.0 20 forest 2022MI165012.P 30.2 40.7 73.9 0.0 24 woodland 2022MI165013.P 54.5 86.0 56.7 0.0 19 woodland 2022MI165014.P 70.2 69.4 49.3 10.7 21 forest 2022MI165015.P 14.5 43.0 82.6 0.0 23 savanna 2022MI165016.P 80.4 62.5 46.9 2.0 24 forest 2022MI165017.P 36.0 82.4 30.7 2.0 20 woodland 2022MI165018.P 74.6 70.2 31.3 0.0 25 forest 2022MI165019.P 91.4 45.1 46.7 0.2 35 forest 2022MI165020.P 64.2 20.9 87.9 90.5 20 forest 2022MI165021.P 73.2 37.4 73.9 5.9 25 forest 2022MI165022.P 72.2 22.8 55.5 0.0 26 forest 2022MI165023.P 72.2 22.3 75.5 0.2 35 forest 2022MI165024.P 78.7 39.2 85.3 0.0 27 forest 2022MI165025.P 60.6 24.9 88.2 5.0 22 forest 2022MI165026.P 31.9 77.4 95.1 0.0 20 woodland 2022MI165027.P 98.6 20.8 4.2 0.0 30 forest 2022MI165028.P 95.6 39.8 8.0 0.0 22 forest 2022MI165029.P 95.2 57.0 7.4 0.0 26 forest 2022MI165030.P 95.2 5.0 29.2 0.0 20 forest 2022MI165031.P 98.6 42.8 18.3 0.2 21 forest 2022MI165032.P 97.9 15.5 20.1 0.0 26 forest 2022MI165033.P 79.9 42.0 99.3 0.0 22 forest 2022MI165034.P 91.8 57.8 0.6 0.0 30 forest 6.3 Structure Profile veg.str &lt;- summary.crown.thickness(veg, breaks = c(c(-1:9)/10,c(2:100)/2)) |&gt; structure.fill.zero() |&gt; subset(type %in% c(&#39;tree&#39;, &#39;shrub/vine&#39;, &#39;grass/grasslike&#39;, &#39;forb&#39;)) veg.str.pct &lt;- veg.str |&gt; group_by(type, stratum, stratum.label, bottom, top) |&gt; summarise(X25 = quantile(Cover, 0.25), X50 = quantile(Cover, 0.5), X75 = quantile(Cover, 0.75)) knitr::kable( head(veg.str, 25), booktabs = TRUE, caption = &#39;A table of the first 25 rows of the veg.str data.&#39; ) Table 6.2: A table of the first 25 rows of the veg.str data. plot type stratum stratum.label bottom top Cover 2022MI165001.P forb 2 -0.1-0 -0.1 0.0 6.9 2022MI165001.P forb 3 0-0.1 0.0 0.1 7.0 2022MI165001.P forb 4 0.1-0.2 0.1 0.2 1.2 2022MI165001.P forb 5 0.2-0.3 0.2 0.3 1.0 2022MI165001.P forb 6 0.3-0.4 0.3 0.4 1.0 2022MI165001.P forb 7 0.4-0.5 0.4 0.5 6.9 2022MI165001.P forb 8 0.5-0.6 0.5 0.6 6.0 2022MI165001.P forb 9 0.6-0.7 0.6 0.7 6.0 2022MI165001.P forb 10 0.7-0.8 0.7 0.8 6.0 2022MI165001.P forb 11 0.8-0.9 0.8 0.9 6.0 2022MI165001.P forb 12 0.9-1 0.9 1.0 6.0 2022MI165001.P grass/grasslike 2 -0.1-0 -0.1 0.0 0.0 2022MI165001.P grass/grasslike 3 0-0.1 0.0 0.1 0.0 2022MI165001.P grass/grasslike 4 0.1-0.2 0.1 0.2 2.2 2022MI165001.P grass/grasslike 5 0.2-0.3 0.2 0.3 2.2 2022MI165001.P grass/grasslike 6 0.3-0.4 0.3 0.4 2.2 2022MI165001.P grass/grasslike 7 0.4-0.5 0.4 0.5 2.2 2022MI165001.P grass/grasslike 8 0.5-0.6 0.5 0.6 0.0 2022MI165001.P grass/grasslike 9 0.6-0.7 0.6 0.7 0.0 2022MI165001.P grass/grasslike 10 0.7-0.8 0.7 0.8 0.0 2022MI165001.P grass/grasslike 11 0.8-0.9 0.8 0.9 0.0 2022MI165001.P grass/grasslike 12 0.9-1 0.9 1.0 0.0 2022MI165001.P grass/grasslike 13 1-1.5 1.0 1.5 0.0 2022MI165001.P shrub/vine 2 -0.1-0 -0.1 0.0 0.0 2022MI165001.P shrub/vine 3 0-0.1 0.0 0.1 3.2 ggplot(veg.str.pct, aes(x = top, y = X50, col=type)) + # plot median geom_line() + # plot quantiles geom_ribbon(aes(ymin = X25, ymax = X75, x = top, fill=type), alpha = 0.2) + coord_flip() + theme(legend.position = &quot;none&quot;)+ scale_x_continuous(name=&#39;height (m)&#39;, breaks=c(0:100)*5, minor_breaks = NULL, limits = c(0,40))+ scale_y_continuous(name=&#39;cover&#39;)+ facet_wrap(~ type, scales = &quot;free_x&quot;, nrow=1) Figure 6.1: Structure of plot collection. #Custom transformation as a function passing a parameter to existing function. Default sigma of trans = &#39;pseudo_log&#39; is 1, so in this case, calling the custom function with sigma = 1 is the same as calling trans = &#39;pseudo_log&#39;. Call custom transformation as trans = &#39;ps2&#39;. Ggplot appends &#39;_trans&#39; to the name of the function called, so our function needs to have this appended to its name. But in this data set, trans=&#39;sqrt&#39; is preferable as it doesn&#39;t overly compress the highest canopy. ps2_trans &lt;- function() { scales::pseudo_log_trans(sigma = 1) } ggplot(veg.str.pct, aes(x = top, y = X50, col=type)) + # plot median geom_line() + # plot quantiles geom_ribbon(aes(ymin = X25, ymax = X75, x = top, fill=type), alpha = 0.2) + coord_flip() + theme(legend.position = &quot;none&quot;)+ scale_x_continuous(name=&#39;height (m)&#39;, breaks=c(c(0:4),c(1:100)*5), minor_breaks = NULL, limits = c(0,40), trans = &#39;sqrt&#39;)+ scale_y_continuous(name=&#39;cover&#39;)+ facet_wrap(~ type, scales = &quot;free_x&quot;, nrow=1) Figure 6.2: Structure of plot collection, rescaled. 6.4 Functional Vegetation Attributes A couple of other properties of vegetation to consider is wetness and percent introduced flora. exo.flora() This function determines the percentage cover consisting of flora introduced to the region (presumably since 1492). Can be useful in classifying plots with a high invaded status. Based on state level nativity generalized to regions. If a region is not given, a default nativity for the whole US will be assumed. get.wetness() Function gets mean indicator status, ranging from 0 (all upland) to 1 (all obligate wetland), based on taxon identity and region. If region is not supplied, hydric status will be based on the mean status for all regions rating the taxon. get.habit.code() This function looks up a default growth habit (“life form”) code for a taxon. Codes are modified from Appendix E of the US National Vegetation Classification (FGDC (2008)). The first letters indicate stem persistence and height potential: H = Herbs (rooted forbs and graminoids inclusive); S = Shrubs, free standing woody plants normally &lt; 5 m tall when mature; T = Trees, free standing woody plants normally &gt; 5 m tall when mature; L = Lianas and woody vines normally rooted in the ground and dependent on other plants for structural support; E = Epiphytes normally not rooted in the ground, established in the branches or trunks of other plants (mostly trees) – can be either parasitic or autotrophic, and includes both woody and herbaceous examples; N = Nonvascular autotrophs, including bryophytes, lichens, and algae. Most of the time when nonvascular autotrophs are listed in a plot, it is due to their dominance in the ground stratum, however any positive height attributed to the plants should be assumed to be indicate an epiphytic position within the shrub tree stratum, and not the stature of the plant itself, which is always arbitrarily assigned a zero height when on the ground even if some mosses do approach 0.1 m tall. A significant departure from USNVC is an insertion of a number after “H”, “S”, and “T” to distinguish between:“H1” annuals; “H2” perennials and biennials; “S1” subshrubs and dwarf shrubs; “S2” medium and tall shrubs; “T1” dwarf trees; “T2” medium and tall trees. Physiognomy After first letter and size modifier, secondary letters correspond to leaf persistence and size. Some of these include: BE = Broadleaf evergreen. BD = Broadleaf deciduous. NE = Broadleaf evergreen. ND = Broadleaf deciduous. F = Forb. FE = Seedless forb (fern ally). FV = Herbaceous vine. GC = Cool season (C3) graminoid. GW = Warm season (C4) graminoid. These Characteristics can be used to calculate functional differences among plots. veg$habitcode &lt;- get.habit.code(veg$taxon) veg &lt;- veg |&gt; mutate(evergreen = case_when(grepl(&#39;NE&#39;, habitcode) ~ 1, grepl(&#39;BE&#39;, habitcode) ~ 1, grepl(&#39;BD&#39;, habitcode) ~ 0, grepl(&#39;ND&#39;, habitcode) ~ 0, TRUE ~ NA_real_)) veg &lt;- veg |&gt; mutate(warmseason = case_when(grepl(&#39;GW&#39;, habitcode) ~ 1, grepl(&#39;GC&#39;, habitcode) ~ 0, TRUE ~ NA_real_)) veg.functional &lt;- veg |&gt; group_by(plot) |&gt; summarise(evergreen = weighted.mean(evergreen, cover, na.rm = TRUE), warmseason = weighted.mean(warmseason, cover, na.rm = TRUE)) knitr::kable( veg.functional, booktabs = TRUE, caption = &#39;A table of veg.functional data.&#39; ) Table 6.3: A table of veg.functional data. plot evergreen warmseason 2022MI165001.P 0.0296296 0 2022MI165002.P 0.0000000 0 2022MI165003.P 0.0315259 0 2022MI165004.P 0.0000000 - 2022MI165005.P 0.1776650 0 2022MI165006.P 0.0000000 - 2022MI165007.P 0.1533258 0 2022MI165008.P 0.0000000 0 2022MI165009.P 0.0000000 0 2022MI165010.P 0.5259259 0 2022MI165011.P 0.0710306 0 2022MI165012.P 0.7035176 0 2022MI165013.P 0.0000000 0 2022MI165014.P 0.4072398 0 2022MI165015.P 0.2161383 0 2022MI165016.P 0.5283019 0 2022MI165017.P 0.2346437 0 2022MI165018.P 0.0172043 0 2022MI165019.P 0.1772727 0 2022MI165020.P 0.6592292 0 2022MI165021.P 0.5652174 0 2022MI165022.P 0.4809287 0 2022MI165023.P 0.6124031 0 2022MI165024.P 0.2369942 0 2022MI165025.P 0.4900794 0 2022MI165026.P 0.0000000 0 2022MI165027.P 0.0000000 - 2022MI165028.P 0.0000000 0 2022MI165029.P 0.0000000 0 2022MI165030.P 0.0476190 - 2022MI165031.P 0.3819095 0 2022MI165032.P 0.6353678 - 2022MI165033.P 0.0000000 0 2022MI165034.P 0.0294695 0 6.5 Ternary Plot of Structure Different combinations of trees, shrubs, and herbaceous vegetation make for different structural categories. When analyzing strictly from top down, ignoring understory structure (as with remote sensing and LiDAR canopy height models), the total cover adds up to 100%. Tree and shrub cover can be reallocated and displayed on a ternary plot just like soil texture. ‘Open’ is used instead of herb cover to ensure that numbers add up to 100. library(ggtern) veg &lt;- veg |&gt; mutate(tree = ifelse(type %in% c(&#39;tree&#39;, &#39;shrub/vine&#39;) &amp; ht.max &gt; 5,cover,0), woody = ifelse(type %in% c(&#39;tree&#39;, &#39;shrub/vine&#39;),cover,0)) veg.tern &lt;- veg |&gt; group_by(plot) |&gt; summarise(tree = cover.agg(tree), woody = cover.agg(woody), shrub = woody - tree, open = 100 - woody) ggtern(veg.tern, aes(x=open, y=tree, z=shrub))+ geom_point() Figure 6.3: Ternary plot of vegetation structure. Alternatively, we can define breaks between categories and add to the background of the plot. s1 &lt;- data.frame(open = c(35,0,0), tree = c(65,100,65), shrub = c(0,0,35), group=&quot;1 forest&quot;) s2 &lt;- data.frame(open = c(25,25,0,0), tree = c(10,65,65,10), shrub = c(65,10,35,90), group=&quot;2 dense scrubby woodland&quot;) s3 &lt;- data.frame(open = c(80,25,25), tree = c(10,65,10), shrub = c(10,10,65), group=&quot;3 open scrubby woodland&quot;) s4 &lt;- data.frame(open = c(90,35,25,80), tree = c(10,65,65,10), shrub = c(0,0,10,10), group=&quot;4 open woodland/savanna&quot;) s5 &lt;- data.frame(open = c(25,25,0,0), tree = c(0,10,10,0), shrub = c(75,65,90,100), group=&quot;5 shrub thicket&quot;) s6 &lt;- data.frame(open = c(90,80,25,25), tree = c(0,10,10,0), shrub = c(10,10,65,75), group=&quot;6 open shrubland&quot;) s7 &lt;- data.frame(open = c(100,90,80,90), tree = c(0,10,10,0), shrub = c(0,0,10,10), group=&quot;7 open grassland&quot;) str.polys = rbind(s1,s2,s3,s4,s5,s6,s7) ggtern() + geom_polygon(data=str.polys, aes(fill=group, x=open, y=tree, z=shrub),alpha=0.25,size=0.1, color=&#39;black&#39;) + geom_point(data=veg.tern, aes(x=open, y=tree, z=shrub))+ scale_fill_manual(values=c(&#39;darkcyan&#39;,&#39;darkgreen&#39;,&#39;green&#39;,&#39;yellowgreen&#39;,&#39;red&#39;,&#39;orange&#39;,&#39;yellow&#39;)) + theme(legend.position=c(0,1),legend.justification=c(0,1)) + labs(fill=&quot;Vegetation Structure&quot;) Figure 6.4: Ternary plot of vegetation structure with categories. References "],["vegetation-plant-profile-diagrams.html", "Chapter 7 Vegetation Plant Profile Diagrams 7.1 Data Processing 7.2 Plot Plant Profiles", " Chapter 7 Vegetation Plant Profile Diagrams The reason vegnasis package was created in the first place is to generate pictorial drawings of vegetation structure using plant shapes. Currently, only the most basic shapes have been developed as a proof of concept: generic broadleaf, conifer, shrub, forb, graminoid, palm, and fern. Over time, it is expected that more templates would be drawn in Inkscape or similar vector drawing software, and converted to xy coordinates that can be plotted with the ggplot2 package. The graphical function simply uses the geom_polygon() element within ggplot to draw individual plants, with colors fading with distance to simulate depth. Before plotting any veg plot data, it first needs to be standardized with vegnasis::clean.veg() or vegnasis::pre.fill.veg(). It is highly recommended to limit data to a single plot before processing with vegnasis::grow_plants(), which will create the elements needed to draw the plants with the vegnasis::veg_profile_plot() function. 7.1 Data Processing # remotes::install_github(&quot;phytoclast/vegnasis&quot;, dependencies = FALSE) library(vegnasis) library(ggplot2) veg.raw &lt;- vegnasis::nasis.veg veg &lt;- clean.veg(veg.raw) veg.select &lt;- subset(veg, grepl(&#39;2022MI165021.P&#39;,plot)) plants &lt;- grow_plants(veg.select) 7.2 Plot Plant Profiles 7.2.1 Northern Michigan hardwood forest veg.select &lt;- subset(veg, grepl(&#39;2022MI165002.P&#39;,plot)) plants &lt;- grow_plants(veg.select) veg_profile_plot(plants) Figure 7.1: Structure of northern Michigan hardwood forest. 7.2.2 Transformed Y axis veg_profile_plot(plants, &#39;sqrt&#39;, 5) Figure 7.2: Structure of a northern Michigan forest (transformed). 7.2.3 Northern Michigan mixed forest veg.select &lt;- subset(veg, grepl(&#39;2022MI165023.P&#39;,plot)) plants &lt;- grow_plants(veg.select) veg_profile_plot(plants, unit=&#39;m&#39;, skycolor = &#39;white&#39;, fadecolor = &#39;lightgray&#39;, gridalpha = 0.1, groundcolor = &#39;darkgray&#39;) Figure 7.3: Structure of northern Michigan mixed forest. 7.2.4 Northern Michigan pine forest Override default tree colors and shapes. veg.select &lt;- subset(veg, grepl(&#39;2022MI165021.P&#39;,plot)) taxon &lt;- c(&#39;Acer rubrum&#39;, &#39;Pinus resinosa&#39;) crfill &lt;- c(NA,&quot;#80991A&quot;) stfill &lt;- c(&#39;gray&#39;,&quot;#B36666&quot;) crshape &lt;- c(NA,&#39;conifer2&#39;) override &lt;- data.frame(taxon=taxon,stfill=stfill,crfill=crfill,crshape=crshape) veg.select &lt;- veg.select |&gt; left_join(override) plants &lt;- grow_plants(veg.select) veg_profile_plot(plants) Figure 7.4: Structure of northern Michigan pine forest. 7.2.5 Washington conifer forest veg.select &lt;- subset(veg, grepl(&#39;2021WA031024&#39;,plot)) plants &lt;- grow_plants(veg.select) veg_profile_plot(plants, unit=&#39;m&#39;, skycolor = &#39;white&#39;, fadecolor = &#39;lightgray&#39;, gridalpha = 0.1, groundcolor = &#39;darkgray&#39;) Figure 7.5: Structure of a Washington conifer forest. 7.2.6 Generic oak savanna Many parameters can be adjusted such as making the plot longer or changing sky color. Add unknown deciduous shrub with silvery green leaves (e.i. Eleagnus without actually saying it) by specifying habit code “S.BD” and a crown fill color (find a the rgb color hex code that looks right). #Make up savanna data thiscolor = rgb(0.6,0.9,0.7) plot &lt;- c(&#39;plot1&#39;) taxon &lt;- c(&#39;Quercus macrocarpa&#39;,&#39;UNK&#39;,&#39;Pteridium&#39;, &#39;Festuca&#39;, &#39;Andropogon&#39;, &#39;Liatris&#39;) cover &lt;- c(20,5,10,60,10,5) crown.max &lt;- c(15,4,1,0.6,2,0.4) crfill &lt;- c(NA,thiscolor,NA,NA,NA,NA) dbh &lt;- c(60,NA,NA,NA,NA,NA) habit &lt;- c(NA,&#39;S.BD&#39;,NA,NA,NA,NA) mydata &lt;- data.frame(plot=plot,taxon=taxon, cover=cover, habit=habit, crown.max = crown.max, dbh.max = dbh, crfill=crfill) veg &lt;- mydata |&gt; pre.fill.veg() plants &lt;- grow_plants(veg, plength=100) #Grow more plants on a longer 100 m plot (default was 50 m). veg_profile_plot(plants, unit=&#39;m&#39;, skycolor = rgb(0.8,0.98,1), fadecolor = &#39;lightgray&#39;, gridalpha = 0.1, groundcolor = rgb(0.55,0.45,0.2), xlim=c(0,100)) Figure 7.6: Structure of a generic oak savanna "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
