<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Composition | Essentials of Vegetation Data</title>
  <meta name="description" content="This is a brief instruction manual of how to inventory vegetation, and how to process and analyse vegetation data." />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Composition | Essentials of Vegetation Data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a brief instruction manual of how to inventory vegetation, and how to process and analyse vegetation data." />
  <meta name="github-repo" content="phytoclast/vegbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Composition | Essentials of Vegetation Data" />
  
  <meta name="twitter:description" content="This is a brief instruction manual of how to inventory vegetation, and how to process and analyse vegetation data." />
  

<meta name="author" content="Greg J. Schmidt" />


<meta name="date" content="2023-04-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vegetation-analysis.html"/>
<link rel="next" href="structure.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Essentials of Vegetation Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> What is Vegetation?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#strata"><i class="fa fa-check"></i><b>1.1</b> Strata</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sampling-intensity.html"><a href="sampling-intensity.html"><i class="fa fa-check"></i><b>2</b> Sampling Intensity</a>
<ul>
<li class="chapter" data-level="" data-path="sampling-intensity.html"><a href="sampling-intensity.html#principles"><i class="fa fa-check"></i>Principles:</a></li>
<li class="chapter" data-level="2.1" data-path="sampling-intensity.html"><a href="sampling-intensity.html#tier-1"><i class="fa fa-check"></i><b>2.1</b> Tier 1</a>
<ul>
<li class="chapter" data-level="" data-path="sampling-intensity.html"><a href="sampling-intensity.html#additional-option-for-biodiversity"><i class="fa fa-check"></i>Additional option for biodiversity</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="sampling-intensity.html"><a href="sampling-intensity.html#tier-2"><i class="fa fa-check"></i><b>2.2</b> Tier 2</a>
<ul>
<li class="chapter" data-level="" data-path="sampling-intensity.html"><a href="sampling-intensity.html#additional-option-for-trees"><i class="fa fa-check"></i>Additional option for trees</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="sampling-intensity.html"><a href="sampling-intensity.html#tier-3"><i class="fa fa-check"></i><b>2.3</b> Tier 3</a>
<ul>
<li class="chapter" data-level="" data-path="sampling-intensity.html"><a href="sampling-intensity.html#additional-options-for-dead-structure"><i class="fa fa-check"></i>Additional options for dead structure</a></li>
<li class="chapter" data-level="" data-path="sampling-intensity.html"><a href="sampling-intensity.html#additional-options-for-carbon-sequestration-potentialproductivity-and-grazing"><i class="fa fa-check"></i>Additional options for carbon sequestration potential/productivity and grazing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vegetation-databases.html"><a href="vegetation-databases.html"><i class="fa fa-check"></i><b>3</b> Vegetation Databases</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vegetation-databases.html"><a href="vegetation-databases.html#veglog-ms-access-database"><i class="fa fa-check"></i><b>3.1</b> VegLog MS Access Database</a>
<ul>
<li class="chapter" data-level="" data-path="vegetation-databases.html"><a href="vegetation-databases.html#site-data"><i class="fa fa-check"></i>Site data</a></li>
<li class="chapter" data-level="" data-path="vegetation-databases.html"><a href="vegetation-databases.html#taxon-data"><i class="fa fa-check"></i>Taxon data</a></li>
<li class="chapter" data-level="" data-path="vegetation-databases.html"><a href="vegetation-databases.html#other-vegetation-details-and-processing"><i class="fa fa-check"></i>Other Vegetation details and processing</a></li>
<li class="chapter" data-level="" data-path="vegetation-databases.html"><a href="vegetation-databases.html#reports-conversions-to-nasis"><i class="fa fa-check"></i>Reports (conversions to NASIS)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vegetation-databases.html"><a href="vegetation-databases.html#vegetation-plot-object-in-nasis"><i class="fa fa-check"></i><b>3.2</b> Vegetation Plot Object in NASIS</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vegetation-analysis.html"><a href="vegetation-analysis.html"><i class="fa fa-check"></i><b>4</b> Vegetation Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="vegetation-analysis.html"><a href="vegetation-analysis.html#plot-data-schema"><i class="fa fa-check"></i><b>4.1</b> Plot Data Schema</a></li>
<li class="chapter" data-level="4.2" data-path="vegetation-analysis.html"><a href="vegetation-analysis.html#missing-data"><i class="fa fa-check"></i><b>4.2</b> Missing Data</a></li>
<li class="chapter" data-level="4.3" data-path="vegetation-analysis.html"><a href="vegetation-analysis.html#aggregating-cover"><i class="fa fa-check"></i><b>4.3</b> Aggregating Cover</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="composition.html"><a href="composition.html"><i class="fa fa-check"></i><b>5</b> Composition</a>
<ul>
<li class="chapter" data-level="5.1" data-path="composition.html"><a href="composition.html#data-processing"><i class="fa fa-check"></i><b>5.1</b> Data Processing</a></li>
<li class="chapter" data-level="5.2" data-path="composition.html"><a href="composition.html#harmonizing-taxa"><i class="fa fa-check"></i><b>5.2</b> Harmonizing Taxa</a></li>
<li class="chapter" data-level="5.3" data-path="composition.html"><a href="composition.html#associations"><i class="fa fa-check"></i><b>5.3</b> Associations</a></li>
<li class="chapter" data-level="5.4" data-path="composition.html"><a href="composition.html#cluster-analysis"><i class="fa fa-check"></i><b>5.4</b> Cluster Analysis</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>6</b> Structure</a>
<ul>
<li class="chapter" data-level="6.1" data-path="structure.html"><a href="structure.html#data-processing-1"><i class="fa fa-check"></i><b>6.1</b> Data Processing</a></li>
<li class="chapter" data-level="6.2" data-path="structure.html"><a href="structure.html#structure-summary"><i class="fa fa-check"></i><b>6.2</b> Structure Summary</a></li>
<li class="chapter" data-level="6.3" data-path="structure.html"><a href="structure.html#structure-profile"><i class="fa fa-check"></i><b>6.3</b> Structure Profile</a></li>
<li class="chapter" data-level="6.4" data-path="structure.html"><a href="structure.html#functional-vegetation-attributes"><i class="fa fa-check"></i><b>6.4</b> Functional Vegetation Attributes</a></li>
<li class="chapter" data-level="6.5" data-path="structure.html"><a href="structure.html#ternary-plot-of-structure"><i class="fa fa-check"></i><b>6.5</b> Ternary Plot of Structure</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html"><i class="fa fa-check"></i><b>7</b> Vegetation Plant Profile Diagrams</a>
<ul>
<li class="chapter" data-level="7.1" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#data-processing-2"><i class="fa fa-check"></i><b>7.1</b> Data Processing</a></li>
<li class="chapter" data-level="7.2" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#plot-plant-profiles"><i class="fa fa-check"></i><b>7.2</b> Plot Plant Profiles</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#northern-michigan-conifer-forest"><i class="fa fa-check"></i><b>7.2.1</b> Northern Michigan conifer forest</a></li>
<li class="chapter" data-level="7.2.2" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#northern-michigan-hardwood-forest"><i class="fa fa-check"></i><b>7.2.2</b> Northern Michigan hardwood forest</a></li>
<li class="chapter" data-level="7.2.3" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#transformed-y-axis"><i class="fa fa-check"></i><b>7.2.3</b> Transformed Y axis</a></li>
<li class="chapter" data-level="7.2.4" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#northern-michigan-mixed-forest"><i class="fa fa-check"></i><b>7.2.4</b> Northern Michigan mixed forest</a></li>
<li class="chapter" data-level="7.2.5" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#washington-conifer-forest"><i class="fa fa-check"></i><b>7.2.5</b> Washington conifer forest</a></li>
<li class="chapter" data-level="7.2.6" data-path="vegetation-plant-profile-diagrams.html"><a href="vegetation-plant-profile-diagrams.html#generic-oak-savanna"><i class="fa fa-check"></i><b>7.2.6</b> Generic oak savanna</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/phytoclast/vegbook" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Essentials of Vegetation Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="composition" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Composition<a href="composition.html#composition" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This analysis using vegnasis package explores vegetation composition.</p>
<div id="data-processing" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Data Processing<a href="composition.html#data-processing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="composition.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github(&quot;phytoclast/vegnasis&quot;, dependencies = FALSE)</span></span>
<span id="cb11-2"><a href="composition.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegnasis)</span>
<span id="cb11-3"><a href="composition.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb11-4"><a href="composition.html#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="composition.html#cb11-5" aria-hidden="true" tabindex="-1"></a>veg.raw <span class="ot">&lt;-</span> vegnasis<span class="sc">::</span>nasis.veg</span>
<span id="cb11-6"><a href="composition.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># With a connection to NASIS via soilDB...</span></span>
<span id="cb11-7"><a href="composition.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># veg.raw &lt;- soilDB::get_vegplot_species_from_NASIS_db()</span></span>
<span id="cb11-8"><a href="composition.html#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="composition.html#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="composition.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Clean data</span></span>
<span id="cb11-11"><a href="composition.html#cb11-11" aria-hidden="true" tabindex="-1"></a>veg <span class="ot">&lt;-</span> <span class="fu">clean.veg</span>(veg.raw)</span>
<span id="cb11-12"><a href="composition.html#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Select only Wexford County Michigan records, and exclude imprecise non bionomial (genus or family) records by requiring a blank space in the name.</span></span>
<span id="cb11-13"><a href="composition.html#cb11-13" aria-hidden="true" tabindex="-1"></a>veg <span class="ot">&lt;-</span>  veg <span class="sc">|&gt;</span> <span class="fu">subset</span>(<span class="fu">grepl</span>(<span class="st">&#39;MI165&#39;</span>,plot) <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&#39;[[:blank:]]&#39;</span>,taxon))</span>
<span id="cb11-14"><a href="composition.html#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#These tasks fill in missing plant &#39;types&#39; and establishes the crown heights based on user inputs of stratum, live canopy heights, and taxon norms when user data is missing.</span></span>
<span id="cb11-15"><a href="composition.html#cb11-15" aria-hidden="true" tabindex="-1"></a>veg <span class="ot">&lt;-</span> veg <span class="sc">|&gt;</span> <span class="fu">fill.type.df</span>() <span class="sc">|&gt;</span> <span class="fu">fill.hts.df</span>()</span>
<span id="cb11-16"><a href="composition.html#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="composition.html#cb11-17" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb11-18"><a href="composition.html#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(veg, <span class="dv">10</span>), <span class="at">booktabs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-19"><a href="composition.html#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&#39;A table of the first 10 rows of the veg data.&#39;</span></span>
<span id="cb11-20"><a href="composition.html#cb11-20" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-5">Table 5.1: </span>A table of the first 10 rows of the veg data.</caption>
<colgroup>
<col width="2%" />
<col width="8%" />
<col width="3%" />
<col width="3%" />
<col width="13%" />
<col width="6%" />
<col width="5%" />
<col width="3%" />
<col width="3%" />
<col width="3%" />
<col width="6%" />
<col width="6%" />
<col width="5%" />
<col width="5%" />
<col width="4%" />
<col width="4%" />
<col width="1%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">plot</th>
<th align="left">label</th>
<th align="left">symbol</th>
<th align="left">taxon</th>
<th align="left">type</th>
<th align="left">nativity</th>
<th align="right">cover</th>
<th align="right">ht.min</th>
<th align="right">ht.max</th>
<th align="right">stratum.min</th>
<th align="right">stratum.max</th>
<th align="right">crown.min</th>
<th align="right">crown.max</th>
<th align="right">dbh.min</th>
<th align="right">dbh.max</th>
<th align="right">BA</th>
<th align="right">stand.max</th>
<th align="right">taxon.max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">253</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">VAAN</td>
<td align="left">Vaccinium angustifolium</td>
<td align="left">shrub/vine</td>
<td align="left">native</td>
<td align="right">7.0</td>
<td align="right">0.1</td>
<td align="right">0.3</td>
<td align="right">0.0</td>
<td align="right">0.5</td>
<td align="right">NA</td>
<td align="right">0.3</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">0.5</td>
</tr>
<tr class="even">
<td align="left">254</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">QURU</td>
<td align="left">Quercus rubra</td>
<td align="left">tree</td>
<td align="left">native</td>
<td align="right">5.0</td>
<td align="right">5.0</td>
<td align="right">20.0</td>
<td align="right">15.0</td>
<td align="right">30.0</td>
<td align="right">5</td>
<td align="right">20.0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">35.0</td>
</tr>
<tr class="odd">
<td align="left">255</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">QUAL</td>
<td align="left">Quercus alba</td>
<td align="left">tree</td>
<td align="left">native</td>
<td align="right">0.2</td>
<td align="right">0.4</td>
<td align="right">0.8</td>
<td align="right">0.5</td>
<td align="right">5.0</td>
<td align="right">NA</td>
<td align="right">0.8</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">35.0</td>
</tr>
<tr class="even">
<td align="left">256</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">QUAL</td>
<td align="left">Quercus alba</td>
<td align="left">tree</td>
<td align="left">native</td>
<td align="right">1.0</td>
<td align="right">0.2</td>
<td align="right">0.5</td>
<td align="right">0.0</td>
<td align="right">0.5</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">35.0</td>
</tr>
<tr class="odd">
<td align="left">257</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">PTAQ</td>
<td align="left">Pteridium aquilinum</td>
<td align="left">forb</td>
<td align="left">native</td>
<td align="right">75.0</td>
<td align="right">0.5</td>
<td align="right">1.0</td>
<td align="right">0.0</td>
<td align="right">0.5</td>
<td align="right">NA</td>
<td align="right">1.0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">2.0</td>
</tr>
<tr class="even">
<td align="left">258</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">PRSE2</td>
<td align="left">Prunus serotina</td>
<td align="left">tree</td>
<td align="left">native</td>
<td align="right">1.0</td>
<td align="right">3.0</td>
<td align="right">6.0</td>
<td align="right">5.0</td>
<td align="right">15.0</td>
<td align="right">NA</td>
<td align="right">6.0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">35.0</td>
</tr>
<tr class="odd">
<td align="left">259</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">PRSE2</td>
<td align="left">Prunus serotina</td>
<td align="left">tree</td>
<td align="left">native</td>
<td align="right">0.2</td>
<td align="right">0.2</td>
<td align="right">0.5</td>
<td align="right">0.0</td>
<td align="right">0.5</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">35.0</td>
</tr>
<tr class="even">
<td align="left">260</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">PLSC70</td>
<td align="left">Pleurozium schreberi</td>
<td align="left">moss</td>
<td align="left">native</td>
<td align="right">90.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.5</td>
<td align="right">NA</td>
<td align="right">0.0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">261</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">PIBA2</td>
<td align="left">Pinus banksiana</td>
<td align="left">tree</td>
<td align="left">native</td>
<td align="right">56.0</td>
<td align="right">8.0</td>
<td align="right">17.0</td>
<td align="right">15.0</td>
<td align="right">30.0</td>
<td align="right">8</td>
<td align="right">17.0</td>
<td align="right">16</td>
<td align="right">22</td>
<td align="right">23</td>
<td align="right">30</td>
<td align="right">25.0</td>
</tr>
<tr class="even">
<td align="left">262</td>
<td align="left">2022MI165020.P</td>
<td align="left">NA</td>
<td align="left">PIBA2</td>
<td align="left">Pinus banksiana</td>
<td align="left">tree</td>
<td align="left">native</td>
<td align="right">9.0</td>
<td align="right">7.5</td>
<td align="right">15.0</td>
<td align="right">5.0</td>
<td align="right">15.0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">25.0</td>
</tr>
</tbody>
</table>
</div>
<div id="harmonizing-taxa" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Harmonizing Taxa<a href="composition.html#harmonizing-taxa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When combining data from multiple sources, the possibility exists that the ecologist used a different scientific name for a taxon. Before conducting cluster analysis, it is wise to harmonize the taxonomy.</p>
<p><strong>harmonize.taxa()</strong></p>
<ul>
<li>This function synonymizes taxa with <a href="http://bonap.org/">BONAP</a> or for Mexican only plants, Kewâ€™s <a href="https://powo.science.kew.org/">Plants of the World Online</a> circa 2022, and returns a binomial. Assuming that the ecologist has the correct concept for the plant while in the field, and is using a legitimate name for that concept, the name can be synonymized. This ensures that various vegetation summarizing functions work off a shared taxonomic backbone, and not misconstrue synonyms as plant diversity.</li>
</ul>
</div>
<div id="associations" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Associations<a href="composition.html#associations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="composition.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This function ranks each taxon by cover and retains the top 2-5 taxa, with fewer taxa retained with greater unequal dominance. Taxa are separated by &#39;/&#39; when different stratum, and &#39;-&#39; when in the same stratum.</span></span>
<span id="cb12-2"><a href="composition.html#cb12-2" aria-hidden="true" tabindex="-1"></a>veg.associations <span class="ot">&lt;-</span> veg <span class="sc">|&gt;</span> <span class="fu">get.assoc</span>()</span>
<span id="cb12-3"><a href="composition.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="composition.html#cb12-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb12-5"><a href="composition.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  veg.associations, <span class="at">booktabs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-6"><a href="composition.html#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&#39;A table with the top 2-5 taxa organized by stratum of each plot.&#39;</span></span>
<span id="cb12-7"><a href="composition.html#cb12-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-6">Table 5.2: </span>A table with the top 2-5 taxa organized by stratum of each plot.</caption>
<colgroup>
<col width="10%" />
<col width="89%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">plot</th>
<th align="left">association</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2022MI165001.P</td>
<td align="left">Populus grandidentata/Pteridium aquilinum</td>
</tr>
<tr class="even">
<td align="left">2022MI165002.P</td>
<td align="left">Acer rubrum/Fagus grandifolia</td>
</tr>
<tr class="odd">
<td align="left">2022MI165003.P</td>
<td align="left">Acer rubrum/Fagus grandifolia</td>
</tr>
<tr class="even">
<td align="left">2022MI165004.P</td>
<td align="left">Quercus rubra/Fagus grandifolia/Pteridium aquilinum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165005.P</td>
<td align="left">Populus tremuloides/Carex bromoides-Athyrium angustum</td>
</tr>
<tr class="even">
<td align="left">2022MI165006.P</td>
<td align="left">Acer saccharum/Fagus grandifolia/Erythronium americanum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165007.P</td>
<td align="left">Quercus rubra-Tsuga canadensis/Acer rubrum/Ostrya virginiana</td>
</tr>
<tr class="even">
<td align="left">2022MI165008.P</td>
<td align="left">Fagus grandifolia-Acer saccharum/Erythronium americanum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165009.P</td>
<td align="left">Acer saccharum/Allium tricoccum</td>
</tr>
<tr class="even">
<td align="left">2022MI165010.P</td>
<td align="left">Pinus resinosa/Deschampsia flexuosa-Vaccinium angustifolium/Dicranum polysetum-Pleurozium schreberi</td>
</tr>
<tr class="odd">
<td align="left">2022MI165011.P</td>
<td align="left">Quercus velutina/Carex pensylvanica</td>
</tr>
<tr class="even">
<td align="left">2022MI165012.P</td>
<td align="left">Quercus alba/Pinus strobus/Carex pensylvanica-Pteridium aquilinum-Gaultheria procumbens</td>
</tr>
<tr class="odd">
<td align="left">2022MI165013.P</td>
<td align="left">Quercus alba/Pteridium aquilinum</td>
</tr>
<tr class="even">
<td align="left">2022MI165014.P</td>
<td align="left">Pinus resinosa/Vaccinium angustifolium-Pteridium aquilinum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165015.P</td>
<td align="left">Pinus strobus/Solidago gigantea-Maianthemum stellatum</td>
</tr>
<tr class="even">
<td align="left">2022MI165016.P</td>
<td align="left">Pinus resinosa/Quercus alba/Vaccinium angustifolium-Pteridium aquilinum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165017.P</td>
<td align="left">Pinus resinosa-Pinus strobus/Carex pensylvanica-Pteridium aquilinum</td>
</tr>
<tr class="even">
<td align="left">2022MI165018.P</td>
<td align="left">Acer rubrum-Quercus alba/Hamamelis virginiana-Prunus serotina/Pteridium aquilinum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165019.P</td>
<td align="left">Acer rubrum-Quercus rubra/Fagus grandifolia/Amelanchier arborea/Pteridium aquilinum-Carex pensylvanica-Maianthemum canadense</td>
</tr>
<tr class="even">
<td align="left">2022MI165020.P</td>
<td align="left">Pinus banksiana/Pteridium aquilinum-Carex pensylvanica/Pleurozium schreberi</td>
</tr>
<tr class="odd">
<td align="left">2022MI165021.P</td>
<td align="left">Pinus resinosa/Pteridium aquilinum</td>
</tr>
<tr class="even">
<td align="left">2022MI165022.P</td>
<td align="left">Pinus resinosa/Pteridium aquilinum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165023.P</td>
<td align="left">Pinus strobus-Acer rubrum-Tsuga canadensis/Dryopteris carthusiana-Glyceria striata-Solidago gigantea-Coptis trifolia</td>
</tr>
<tr class="even">
<td align="left">2022MI165024.P</td>
<td align="left">Acer rubrum-Quercus rubra/Pinus strobus/Carex pensylvanica</td>
</tr>
<tr class="odd">
<td align="left">2022MI165025.P</td>
<td align="left">Pinus strobus/Fagus grandifolia/Deschampsia flexuosa-Carex pensylvanica</td>
</tr>
<tr class="even">
<td align="left">2022MI165026.P</td>
<td align="left">Acer rubrum/Prunus serotina/Carpinus caroliniana-Quercus alba/Carex stricta</td>
</tr>
<tr class="odd">
<td align="left">2022MI165027.P</td>
<td align="left">Acer rubrum/Fagus grandifolia</td>
</tr>
<tr class="even">
<td align="left">2022MI165028.P</td>
<td align="left">Acer saccharum-Tilia americana</td>
</tr>
<tr class="odd">
<td align="left">2022MI165029.P</td>
<td align="left">Acer saccharum/Ostrya virginiana</td>
</tr>
<tr class="even">
<td align="left">2022MI165030.P</td>
<td align="left">Acer rubrum/Pteridium aquilinum</td>
</tr>
<tr class="odd">
<td align="left">2022MI165031.P</td>
<td align="left">Acer rubrum/Thuja occidentalis/Alnus incana/Vaccinium myrtilloides</td>
</tr>
<tr class="even">
<td align="left">2022MI165032.P</td>
<td align="left">Acer rubrum-Tsuga canadensis</td>
</tr>
<tr class="odd">
<td align="left">2022MI165033.P</td>
<td align="left">Tilia americana/Acer saccharinum/Carpinus caroliniana/Carex stricta</td>
</tr>
<tr class="even">
<td align="left">2022MI165034.P</td>
<td align="left">Acer saccharum/Carpinus caroliniana</td>
</tr>
</tbody>
</table>
</div>
<div id="cluster-analysis" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Cluster Analysis<a href="composition.html#cluster-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="composition.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create plot matrix, based log transformed relative cover values.</span></span>
<span id="cb13-2"><a href="composition.html#cb13-2" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> veg <span class="sc">|&gt;</span> <span class="fu">make.plot.matrix</span>(<span class="at">tr =</span> <span class="st">&#39;log&#39;</span>, <span class="at">rc =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-3"><a href="composition.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="composition.html#cb13-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb13-5"><a href="composition.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  m[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">booktabs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb13-6"><a href="composition.html#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&#39;A table of the first 10 rows of the community data matrix.&#39;</span></span>
<span id="cb13-7"><a href="composition.html#cb13-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table style="width:100%;">
<caption><span id="tab:unnamed-chunk-7">Table 5.3: </span>A table of the first 10 rows of the community data matrix.</caption>
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="9%" />
<col width="8%" />
<col width="11%" />
<col width="9%" />
<col width="12%" />
<col width="9%" />
<col width="7%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Abies.balsamea</th>
<th align="right">Acer.rubrum</th>
<th align="right">Acer.saccharinum</th>
<th align="right">Acer.saccharum</th>
<th align="right">Achillea.millefolium</th>
<th align="right">Adiantum.pedatum</th>
<th align="right">Agrimonia.gryposepala</th>
<th align="right">Allium.tricoccum</th>
<th align="right">Alnus.incana</th>
<th align="right">Alnus.rugosa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2022MI165001.P</td>
<td align="right">0.0098231</td>
<td align="right">0.2735230</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2022MI165002.P</td>
<td align="right">0.0000000</td>
<td align="right">0.7695928</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2022MI165003.P</td>
<td align="right">0.0246233</td>
<td align="right">0.5401819</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2022MI165004.P</td>
<td align="right">0.0000000</td>
<td align="right">0.0015488</td>
<td align="right">0</td>
<td align="right">0.0015488</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2022MI165005.P</td>
<td align="right">0.0000000</td>
<td align="right">0.0353465</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2022MI165006.P</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0.5647917</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2022MI165007.P</td>
<td align="right">0.0000000</td>
<td align="right">0.1868105</td>
<td align="right">0</td>
<td align="right">0.0501600</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2022MI165008.P</td>
<td align="right">0.0000000</td>
<td align="right">0.0016694</td>
<td align="right">0</td>
<td align="right">0.2704181</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2022MI165009.P</td>
<td align="right">0.0000000</td>
<td align="right">0.0016849</td>
<td align="right">0</td>
<td align="right">0.7854276</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.2505727</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2022MI165010.P</td>
<td align="right">0.0000000</td>
<td align="right">0.0050284</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="composition.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#distance matrix based on Bray-Curtis simularity.</span></span>
<span id="cb14-2"><a href="composition.html#cb14-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">=</span> vegan<span class="sc">::</span><span class="fu">vegdist</span>(m, <span class="at">method=</span><span class="st">&#39;bray&#39;</span>)</span>
<span id="cb14-3"><a href="composition.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Cluster analysis using Ward&#39;s method using distance matrix.</span></span>
<span id="cb14-4"><a href="composition.html#cb14-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">agnes</span>(d, <span class="at">method =</span> <span class="st">&#39;ward&#39;</span>)<span class="sc">|&gt;</span> <span class="fu">as.hclust</span>()</span>
<span id="cb14-5"><a href="composition.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Define number of groups to color the dendrogram by.</span></span>
<span id="cb14-6"><a href="composition.html#cb14-6" aria-hidden="true" tabindex="-1"></a>k <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb14-7"><a href="composition.html#cb14-7" aria-hidden="true" tabindex="-1"></a>groups <span class="ot">&lt;-</span> <span class="fu">cutree</span>(t, <span class="at">k =</span> k)</span>
<span id="cb14-8"><a href="composition.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#This function rearranges the branchs and groups so that the tree is always oriented with most nested branches to the bottom of the plot (when tree oriented vertically with branches to the right).</span></span>
<span id="cb14-9"><a href="composition.html#cb14-9" aria-hidden="true" tabindex="-1"></a>groups <span class="ot">&lt;-</span> <span class="fu">dendrogrouporder</span>(t, groups)</span>
<span id="cb14-10"><a href="composition.html#cb14-10" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="st">&#39;Vegetation of Wexford County&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="composition.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.dendro</span>(a,d,t,groups)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-8"></span>
<img src="vegbook1_files/figure-html/unnamed-chunk-8-1.png" alt="Dendrogram of selected plots" width="80%" />
<p class="caption">
Figure 5.1: Dendrogram of selected plots
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vegetation-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="structure.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/phytoclast/vegbook04_Composition.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["vegbook1.pdf", "vegbook1.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
